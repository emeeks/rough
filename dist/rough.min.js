var rough=function(e,t,a,n,l,s,r,i,o,p,u){'use strict';function d(){return{LEFT:0,RIGHT:1,INTERSECTS:2,AHEAD:3,BEHIND:4,SEPARATE:5,UNDEFINED:6}}var h=Math.round,g=Math.pow,f=Math.floor,c=Math.cos,_=Math.sin,v=Math.PI,y=Math.sqrt,x=Math.max,k=Math.min,m=Math.abs;e=e&&e.hasOwnProperty('default')?e['default']:e,t=t&&t.hasOwnProperty('default')?t['default']:t,a=a&&a.hasOwnProperty('default')?a['default']:a,n=n&&n.hasOwnProperty('default')?n['default']:n,l=l&&l.hasOwnProperty('default')?l['default']:l,s=s&&s.hasOwnProperty('default')?s['default']:s,r=r&&r.hasOwnProperty('default')?r['default']:r,i=i&&i.hasOwnProperty('default')?i['default']:i,o=o&&o.hasOwnProperty('default')?o['default']:o,p=p&&p.hasOwnProperty('default')?p['default']:p,u=u&&u.hasOwnProperty('default')?u['default']:u;var w=function(){function a(t,l,s,r){e(this,a),this.RoughSegmentRelationConst=d(),this.px1=t,this.py1=l,this.px2=s,this.py2=r,this.xi=n,this.yi=n,this.a=r-l,this.b=t-s,this.c=s*l-t*r,this._undefined=0==this.a&&0==this.b&&0==this.c}var n=Number.MAX_VALUE;return t(a,[{key:'isUndefined',value:function(){return this._undefined}},{key:'compare',value:function(e){if(this.isUndefined()||e.isUndefined())return this.RoughSegmentRelationConst.UNDEFINED;var t=n,l=n,s=0,r=0,i=this.a,o=this.b,p=this.c;return(1e-5<m(o)&&(t=-i/o,s=-p/o),1e-5<m(e.b)&&(l=-e.a/e.b,r=-e.c/e.b),t==n)?l==n?-p/i==-e.c/e.a?this.py1>=k(e.py1,e.py2)&&this.py1<=x(e.py1,e.py2)?(this.xi=this.px1,this.yi=this.py1,this.RoughSegmentRelationConst.INTERSECTS):this.py2>=k(e.py1,e.py2)&&this.py2<=x(e.py1,e.py2)?(this.xi=this.px2,this.yi=this.py2,this.RoughSegmentRelationConst.INTERSECTS):this.RoughSegmentRelationConst.SEPARATE:this.RoughSegmentRelationConst.SEPARATE:(this.xi=this.px1,this.yi=l*this.xi+r,-1e-5>(this.py1-this.yi)*(this.yi-this.py2)||-1e-5>(e.py1-this.yi)*(this.yi-e.py2)?this.RoughSegmentRelationConst.SEPARATE:1e-5>m(e.a)?-1e-5>(e.px1-this.xi)*(this.xi-e.px2)?this.RoughSegmentRelationConst.SEPARATE:this.RoughSegmentRelationConst.INTERSECTS:this.RoughSegmentRelationConst.INTERSECTS):l==n?(this.xi=e.px1,this.yi=t*this.xi+s,-1e-5>(e.py1-this.yi)*(this.yi-e.py2)||-1e-5>(this.py1-this.yi)*(this.yi-this.py2)?this.RoughSegmentRelationConst.SEPARATE:1e-5>m(i)?-1e-5>(this.px1-this.xi)*(this.xi-this.px2)?this.RoughSegmentRelationConst.SEPARATE:this.RoughSegmentRelationConst.INTERSECTS:this.RoughSegmentRelationConst.INTERSECTS):t==l?s==r?this.px1>=k(e.px1,e.px2)&&this.px1<=x(e.py1,e.py2)?(this.xi=this.px1,this.yi=this.py1,this.RoughSegmentRelationConst.INTERSECTS):this.px2>=k(e.px1,e.px2)&&this.px2<=x(e.px1,e.px2)?(this.xi=this.px2,this.yi=this.py2,this.RoughSegmentRelationConst.INTERSECTS):this.RoughSegmentRelationConst.SEPARATE:this.RoughSegmentRelationConst.SEPARATE:(this.xi=(r-s)/(t-l),this.yi=t*this.xi+s,-1e-5>(this.px1-this.xi)*(this.xi-this.px2)||-1e-5>(e.px1-this.xi)*(this.xi-e.px2)?this.RoughSegmentRelationConst.SEPARATE:this.RoughSegmentRelationConst.INTERSECTS)}},{key:'getLength',value:function(){return this._getLength(this.px1,this.py1,this.px2,this.py2)}},{key:'_getLength',value:function(e,t,a,n){var l=a-e,s=n-t;return y(l*l+s*s)}}]),a}(),b=function(){function a(t,n,l,s,r,i,o,p){e(this,a),this.top=t,this.bottom=n,this.left=l,this.right=s,this.gap=r,this.sinAngle=i,this.tanAngle=p,1e-4>m(i)?this.pos=l+r:.9999<m(i)?this.pos=t+r:(this.deltaX=(n-t)*m(p),this.pos=l-m(this.deltaX),this.hGap=m(r/o),this.sLeft=new w(l,n,l,t),this.sRight=new w(s,n,s,t))}return t(a,[{key:'getNextLine',value:function(){if(1e-4>m(this.sinAngle)){if(this.pos<this.right){var e=[this.pos,this.top,this.pos,this.bottom];return this.pos+=this.gap,e}}else if(!(.9999<m(this.sinAngle))){var t=this.pos-this.deltaX/2,a=this.pos+this.deltaX/2,n=this.bottom,l=this.top;if(this.pos<this.right+this.deltaX){for(;t<this.left&&a<this.left||t>this.right&&a>this.right;)if(this.pos+=this.hGap,t=this.pos-this.deltaX/2,a=this.pos+this.deltaX/2,this.pos>this.right+this.deltaX)return null;var r=new w(t,n,a,l);r.compare(this.sLeft)==d().INTERSECTS&&(t=r.xi,n=r.yi),r.compare(this.sRight)==d().INTERSECTS&&(a=r.xi,l=r.yi),0<this.tanAngle&&(t=this.right-(t-this.left),a=this.right-(a-this.left));var s=[t,n,a,l];return this.pos+=this.hGap,s}}else if(this.pos<this.bottom){var i=[this.left,this.pos,this.right,this.pos];return this.pos+=this.gap,i}return null}}]),a}(),S=function(){function a(t,n){e(this,a),this.type=t,this.text=n}return t(a,[{key:'isType',value:function(e){return this.type===e}}]),a}(),O=function(){function n(t){e(this,n),this.PARAMS={A:['rx','ry','x-axis-rotation','large-arc-flag','sweep-flag','x','y'],a:['rx','ry','x-axis-rotation','large-arc-flag','sweep-flag','x','y'],C:['x1','y1','x2','y2','x','y'],c:['x1','y1','x2','y2','x','y'],H:['x'],h:['x'],L:['x','y'],l:['x','y'],M:['x','y'],m:['x','y'],Q:['x1','y1','x','y'],q:['x1','y1','x','y'],S:['x2','y2','x','y'],s:['x2','y2','x','y'],T:['x','y'],t:['x','y'],V:['y'],v:['y'],Z:[],z:[]},this.COMMAND=0,this.NUMBER=1,this.EOD=2,this.segments=[],this.d=t||'',this.parseData(t),this.processPoints()}return t(n,[{key:'loadFromSegments',value:function(e){this.segments=e,this.processPoints()}},{key:'processPoints',value:function(){for(var e,t=null,a=[0,0],n=0;n<this.segments.length;n++){switch(e=this.segments[n],e.key){case'M':case'L':case'T':e.point=[e.data[0],e.data[1]];break;case'm':case'l':case't':e.point=[e.data[0]+a[0],e.data[1]+a[1]];break;case'H':e.point=[e.data[0],a[1]];break;case'h':e.point=[e.data[0]+a[0],a[1]];break;case'V':e.point=[a[0],e.data[0]];break;case'v':e.point=[a[0],e.data[0]+a[1]];break;case'z':case'Z':t&&(e.point=[t[0],t[1]]);break;case'C':e.point=[e.data[4],e.data[5]];break;case'c':e.point=[e.data[4]+a[0],e.data[5]+a[1]];break;case'S':e.point=[e.data[2],e.data[3]];break;case's':e.point=[e.data[2]+a[0],e.data[3]+a[1]];break;case'Q':e.point=[e.data[2],e.data[3]];break;case'q':e.point=[e.data[2]+a[0],e.data[3]+a[1]];break;case'A':e.point=[e.data[5],e.data[6]];break;case'a':e.point=[e.data[5]+a[0],e.data[6]+a[1]];}('m'===e.key||'M'===e.key)&&(t=null),e.point&&(a=e.point,!t&&(t=e.point)),('z'===e.key||'Z'===e.key)&&(t=null)}}},{key:'parseData',value:function(e){var t=this.tokenize(e),a=0,n=t[a],l='BOD';for(this.segments=[];!n.isType(this.EOD);){var s,r=[];if('BOD'!=l)n.isType(this.NUMBER)?s=this.PARAMS[l].length:(a++,s=this.PARAMS[n.text].length,l=n.text);else if('M'==n.text||'m'==n.text)a++,s=this.PARAMS[n.text].length,l=n.text;else return this.parseData('M0,0'+e);if(a+s<t.length){for(var o,p=a;p<a+s;p++)if(o=t[p],o.isType(this.NUMBER))r[r.length]=o.text;else return void console.error('Parameter type is not a number: '+l+','+o.text);var i;if(this.PARAMS[l])i={key:l,data:r};else return void console.error('Unsupported segment type: '+l);this.segments.push(i),a+=s,n=t[a],'M'==l&&(l='L'),'m'==l&&(l='l')}else console.error('Path data ended before all parameters were found')}}},{key:'tokenize',value:function(e){for(var t=[];''!=e;)if(e.match(/^([ \t\r\n,]+)/))e=e.substr(RegExp.$1.length);else if(e.match(/^([aAcChHlLmMqQsStTvVzZ])/))t[t.length]=new S(this.COMMAND,RegExp.$1),e=e.substr(RegExp.$1.length);else if(e.match(/^(([-+]?[0-9]+(\.[0-9]*)?|[-+]?\.[0-9]+)([eE][-+]?[0-9]+)?)/))t[t.length]=new S(this.NUMBER,parseFloat(RegExp.$1)),e=e.substr(RegExp.$1.length);else return console.error('Unrecognized segment command: '+e),null;return t[t.length]=new S(this.EOD,null),t}},{key:'closed',get:function(){if('undefined'==typeof this._closed){this._closed=!1;var e,t=!0,n=!1;try{for(var l,r,s=a(this.segments);!(t=(l=s.next()).done);t=!0)r=l.value,'z'===r.key.toLowerCase()&&(this._closed=!0)}catch(t){n=!0,e=t}finally{try{!t&&s.return&&s.return()}finally{if(n)throw e}}}return this._closed}}]),n}(),P=function(){function n(t){e(this,n),this.d=t,this.parsed=new O(t),this._position=[0,0],this.bezierReflectionPoint=null,this.quadReflectionPoint=null,this._first=null}return t(n,[{key:'setPosition',value:function(e,t){this._position=[e,t],this._first||(this._first=[e,t])}},{key:'segments',get:function(){return this.parsed.segments}},{key:'closed',get:function(){return this.parsed.closed}},{key:'linearPoints',get:function(){if(!this._linearPoints){var e,t=[],n=[],l=!0,r=!1;try{for(var i,o=a(this.parsed.segments);!(l=(i=o.next()).done);l=!0){var p=i.value,s=p.key.toLowerCase();('m'===s||'z'===s)&&(n.length&&(t.push(n),n=[]),'z'===s)||p.point&&n.push(p.point)}}catch(t){r=!0,e=t}finally{try{!l&&o.return&&o.return()}finally{if(r)throw e}}n.length&&(t.push(n),n=[]),this._linearPoints=t}return this._linearPoints}},{key:'first',get:function(){return this._first},set:function(e){this._first=e}},{key:'position',get:function(){return this._position}},{key:'x',get:function(){return this._position[0]}},{key:'y',get:function(){return this._position[1]}}]),n}(),R=function(){function a(t,n,l,r,i,o){e(this,a);var p=v/180;if(this._segIndex=0,this._numSegs=0,t[0]!=n[0]||t[1]!=n[1]){this._rx=m(l[0]),this._ry=m(l[1]),this._sinPhi=_(r*p),this._cosPhi=c(r*p);var u,d=this._cosPhi*(t[0]-n[0])/2+this._sinPhi*(t[1]-n[1])/2,h=-this._sinPhi*(t[0]-n[0])/2+this._cosPhi*(t[1]-n[1])/2,g=this._rx*this._rx*this._ry*this._ry-this._rx*this._rx*h*h-this._ry*this._ry*d*d;if(0>g){var f=y(1-g/(this._rx*this._rx*this._ry*this._ry));this._rx=f,this._ry=f,u=0}else u=(i==o?-1:1)*y(g/(this._rx*this._rx*h*h+this._ry*this._ry*d*d));var s=u*this._rx*h/this._ry,x=-u*this._ry*d/this._rx;this._C=[0,0],this._C[0]=this._cosPhi*s-this._sinPhi*x+(t[0]+n[0])/2,this._C[1]=this._sinPhi*s+this._cosPhi*x+(t[1]+n[1])/2,this._theta=this.calculateVectorAngle(1,0,(d-s)/this._rx,(h-x)/this._ry);var k=this.calculateVectorAngle((d-s)/this._rx,(h-x)/this._ry,(-d-s)/this._rx,(-h-x)/this._ry);!o&&0<k?k-=2*v:o&&0>k&&(k+=2*v),this._numSegs=Math.ceil(m(k/(v/2))),this._delta=k/this._numSegs,this._T=8/3*_(this._delta/4)*_(this._delta/4)/_(this._delta/2),this._from=t}}return t(a,[{key:'getNextSegment',value:function(){var e,t,a;if(this._segIndex==this._numSegs)return null;var n=c(this._theta),l=_(this._theta),s=this._theta+this._delta,r=c(s),i=_(s);return a=[this._cosPhi*this._rx*r-this._sinPhi*this._ry*i+this._C[0],this._sinPhi*this._rx*r+this._cosPhi*this._ry*i+this._C[1]],e=[this._from[0]+this._T*(-this._cosPhi*this._rx*l-this._sinPhi*this._ry*n),this._from[1]+this._T*(-this._sinPhi*this._rx*l+this._cosPhi*this._ry*n)],t=[a[0]+this._T*(this._cosPhi*this._rx*i+this._sinPhi*this._ry*r),a[1]+this._T*(this._sinPhi*this._rx*i-this._cosPhi*this._ry*r)],this._theta=s,this._from=[a[0],a[1]],this._segIndex++,{cp1:e,cp2:t,to:a}}},{key:'calculateVectorAngle',value:function(e,t,a,n){var l=Math.atan2,s=l(t,e),r=l(n,a);return r>=s?r-s:2*v-(s-r)}}]),a}(),T=function(){function n(t,a){e(this,n),this.sets=t,this.closed=a}return t(n,[{key:'fit',value:function(e){var t,n=[],l=!0,s=!1;try{for(var r,o=a(this.sets);!(l=(r=o.next()).done);l=!0){var p=r.value,u=p.length,h=f(e*u);if(5>h){if(5>=u)continue;h=5}n.push(this.reduce(p,h))}}catch(e){s=!0,t=e}finally{try{!l&&o.return&&o.return()}finally{if(s)throw t}}var g,y='',d=!0,c=!1;try{for(var _,x,v=a(n);!(d=(_=v.next()).done);d=!0){x=_.value;for(var k,m=0;m<x.length;m++)k=x[m],y+=0===m?'M'+k[0]+','+k[1]:'L'+k[0]+','+k[1];this.closed&&(y+='z ')}}catch(e){c=!0,g=e}finally{try{!d&&v.return&&v.return()}finally{if(c)throw g}}return y}},{key:'distance',value:function(e,t){return y(g(e[0]-t[0],2)+g(e[1]-t[1],2))}},{key:'reduce',value:function(e,t){if(e.length<=t)return e;for(var n=e.slice(0);n.length>t;){for(var l=-1,r=-1,o=1;o<n.length-1;o++){var i=this.distance(n[o-1],n[o]),a=this.distance(n[o],n[o+1]),p=this.distance(n[o-1],n[o+1]),u=(i+a+p)/2,s=y(u*(u-i)*(u-a)*(u-p));(0>l||s<l)&&(l=s,r=o)}if(0<r)n.splice(r,1);else break}return n}}]),n}(),E=function(){function a(){e(this,a)}var n=Math.tan;return t(a,[{key:'line',value:function(e,t,a,n,l){var s=this._doubleLine(e,t,a,n,l);return{type:'path',ops:s}}},{key:'linearPath',value:function(e,t,a){var n=(e||[]).length;if(2<n){for(var l=[],s=0;s<n-1;s++)l=l.concat(this._doubleLine(e[s][0],e[s][1],e[s+1][0],e[s+1][1],a));return t&&(l=l.concat(this._doubleLine(e[n-1][0],e[n-1][1],e[0][0],e[0][1],a))),{type:'path',ops:l}}return 2===n?this.line(e[0][0],e[0][1],e[1][0],e[1][1],a):void 0}},{key:'polygon',value:function(e,t){return this.linearPath(e,!0,t)}},{key:'rectangle',value:function(e,t,a,n,l){return this.polygon([[e,t],[e+a,t],[e+a,t+n],[e,t+n]],l)}},{key:'curve',value:function(e,t){var a=this._curveWithOffset(e,1*(1+.2*t.roughness),t),n=this._curveWithOffset(e,1.5*(1+.22*t.roughness),t);return{type:'path',ops:a.concat(n)}}},{key:'ellipse',value:function(e,t,a,n,l){var s=2*v/l.curveStepCount,r=m(a/2),i=m(n/2);r+=this._getOffset(.05*-r,.05*r,l),i+=this._getOffset(.05*-i,.05*i,l);var o=this._ellipse(s,e,t,r,i,1,s*this._getOffset(.1,this._getOffset(.4,1,l),l),l),p=this._ellipse(s,e,t,r,i,1.5,0,l);return{type:'path',ops:o.concat(p)}}},{key:'arc',value:function(e,t,a,n,l,s,r,i,p){var o=e,u=t,d=m(a/2),h=m(n/2);d+=this._getOffset(.01*-d,.01*d,p),h+=this._getOffset(.01*-h,.01*h,p);for(var g=l,f=s;0>g;)g+=2*v,f+=2*v;f-g>2*v&&(g=0,f=2*v);var y=2*v/p.curveStepCount,x=k(y/2,(f-g)/2),w=this._arc(x,o,u,d,h,g,f,1,p),b=this._arc(x,o,u,d,h,g,f,1.5,p),S=w.concat(b);return r&&(i?(S=S.concat(this._doubleLine(o,u,o+d*c(g),u+h*_(g),p)),S=S.concat(this._doubleLine(o,u,o+d*c(f),u+h*_(f),p))):(S.push({op:'lineTo',data:[o,u]}),S.push({op:'lineTo',data:[o+d*c(g),u+h*_(g)]}))),{type:'path',ops:S}}},{key:'hachureFillArc',value:function(e,t,a,n,l,s,r){var i=e,o=t,p=m(a/2),u=m(n/2);p+=this._getOffset(.01*-p,.01*p,r),u+=this._getOffset(.01*-u,.01*u,r);for(var d=l,h=s;0>d;)d+=2*v,h+=2*v;h-d>2*v&&(d=0,h=2*v);for(var g=(h-d)/r.curveStepCount,f=[],y=[],x=d;x<=h;x+=g)f.push(i+p*c(x)),y.push(o+u*_(x));return f.push(i+p*c(h)),y.push(o+u*_(h)),f.push(i),y.push(o),this.hachureFillShape(f,y,r)}},{key:'solidFillShape',value:function(e,t,a){var n=[];if(e&&t&&e.length&&t.length&&e.length===t.length){var l=a.maxRandomnessOffset||0,s=e.length;if(2<s){n.push({op:'move',data:[e[0]+this._getOffset(-l,l,a),t[0]+this._getOffset(-l,l,a)]});for(var r=1;r<s;r++)n.push({op:'lineTo',data:[e[r]+this._getOffset(-l,l,a),t[r]+this._getOffset(-l,l,a)]})}}return{type:'fillPath',ops:n}}},{key:'hachureFillShape',value:function(e,t,a){var l=[];if(e&&t&&e.length&&t.length){for(var s=e[0],r=e[0],o=t[0],p=t[0],u=1;u<e.length;u++)s=k(s,e[u]),r=x(r,e[u]),o=k(o,t[u]),p=x(p,t[u]);var i=a.hachureAngle,d=a.hachureGap;0>d&&(d=4*a.strokeWidth),d=x(d,.1);for(var h,g=i%180*(v/180),f=c(g),y=_(g),m=n(g),w=new b(o-1,p+1,s-1,r+1,d,y,f,m);null!=(h=w.getNextLine());)for(var S=this._getIntersectingLines(h,e,t),O=0;O<S.length;O++)if(O<S.length-1){var P=S[O],R=S[O+1];l=l.concat(this._doubleLine(P[0],P[1],R[0],R[1],a))}}return{type:'fillSketch',ops:l}}},{key:'hachureFillEllipse',value:function(e,t,a,l,s){var r=[],i=m(a/2),o=m(l/2);i+=this._getOffset(.05*-i,.05*i,s),o+=this._getOffset(.05*-o,.05*o,s);var p=s.hachureAngle,u=s.hachureGap;0>=u&&(u=4*s.strokeWidth);var d=s.fillWeight;0>d&&(d=s.strokeWidth/2);for(var h=n(p%180*(v/180)),g=o/i,f=y(g*h*g*h+1),c=g*h/f,_=1/f,x=u/(i*o/y(o*_*(o*_)+i*c*(i*c))/i),k=y(i*i-(e-i+x)*(e-i+x)),w=e-i+x;w<e+i;w+=x){k=y(i*i-(e-w)*(e-w));var b=this._affine(w,t-k,e,t,c,_,g),S=this._affine(w,t+k,e,t,c,_,g);r=r.concat(this._doubleLine(b[0],b[1],S[0],S[1],s))}return{type:'fillSketch',ops:r}}},{key:'svgPath',value:function(e,t){e=(e||'').replace(/\n/g,' ').replace(/(-)/g,' -').replace(/(-\s)/g,'-').replace('/(ss)/g',' ');var a=new P(e);if(t.simplification){var n=new T(a.linearPoints,a.closed),l=n.fit(t.simplification);a=new P(l)}for(var r=[],o=a.segments||[],p=0;p<o.length;p++){var i=o[p],s=0<p?o[p-1]:null,u=this._processSegment(a,i,s,t);u&&u.length&&(r=r.concat(u))}return{type:'path',ops:r}}},{key:'_bezierTo',value:function(e,t,a,n,l,s,r,p){for(var o=[],u=[p.maxRandomnessOffset||1,(p.maxRandomnessOffset||1)+.5],d=null,h=0;2>h;h++)0===h?o.push({op:'move',data:[r.x,r.y]}):o.push({op:'move',data:[r.x+this._getOffset(-u[0],u[0],p),r.y+this._getOffset(-u[0],u[0],p)]}),d=[l+this._getOffset(-u[h],u[h],p),s+this._getOffset(-u[h],u[h],p)],o.push({op:'bcurveTo',data:[e+this._getOffset(-u[h],u[h],p),t+this._getOffset(-u[h],u[h],p),a+this._getOffset(-u[h],u[h],p),n+this._getOffset(-u[h],u[h],p),d[0],d[1]]});return r.setPosition(d[0],d[1]),o}},{key:'_processSegment',value:function(e,t,a,n){var l=[];switch(t.key){case'M':case'm':{var s='m'===t.key;if(2<=t.data.length){var r=+t.data[0],o=+t.data[1];s&&(r+=e.x,o+=e.y);var p=1*(n.maxRandomnessOffset||0);r+=this._getOffset(-p,p,n),o+=this._getOffset(-p,p,n),e.setPosition(r,o),l.push({op:'move',data:[r,o]})}break}case'L':case'l':{var u='l'===t.key;if(2<=t.data.length){var d=+t.data[0],h=+t.data[1];u&&(d+=e.x,h+=e.y),l=l.concat(this._doubleLine(e.x,e.y,d,h,n)),e.setPosition(d,h)}break}case'H':case'h':{var g='h'===t.key;if(t.data.length){var y=+t.data[0];g&&(y+=e.x),l=l.concat(this._doubleLine(e.x,e.y,y,e.y,n)),e.setPosition(y,e.y)}break}case'V':case'v':{var c='v'===t.key;if(t.data.length){var _=+t.data[0];c&&(_+=e.y),l=l.concat(this._doubleLine(e.x,e.y,e.x,_,n)),e.setPosition(e.x,_)}break}case'Z':case'z':{e.first&&(l=l.concat(this._doubleLine(e.x,e.y,e.first[0],e.first[1],n)),e.setPosition(e.first[0],e.first[1]),e.first=null);break}case'C':case'c':{var x='c'===t.key;if(6<=t.data.length){var v=+t.data[0],k=+t.data[1],m=+t.data[2],w=+t.data[3],b=+t.data[4],S=+t.data[5];x&&(v+=e.x,m+=e.x,b+=e.x,k+=e.y,w+=e.y,S+=e.y);var O=this._bezierTo(v,k,m,w,b,S,e,n);l=l.concat(O),e.bezierReflectionPoint=[b+(b-m),S+(S-w)]}break}case'S':case's':{var P='s'===t.key;if(4<=t.data.length){var T=+t.data[0],E=+t.data[1],A=+t.data[2],C=+t.data[3];P&&(T+=e.x,A+=e.x,E+=e.y,C+=e.y);var N=T,L=E,W=a?a.key:'',z=null;('c'==W||'C'==W||'s'==W||'S'==W)&&(z=e.bezierReflectionPoint),z&&(N=z[0],L=z[1]);var D=this._bezierTo(N,L,T,E,A,C,e,n);l=l.concat(D),e.bezierReflectionPoint=[A+(A-T),C+(C-E)]}break}case'Q':case'q':{var I='q'===t.key;if(4<=t.data.length){var F=+t.data[0],M=+t.data[1],B=+t.data[2],q=+t.data[3];I&&(F+=e.x,B+=e.x,M+=e.y,q+=e.y);var U=1*(1+.2*n.roughness),V=1.5*(1+.22*n.roughness);l.push({op:'move',data:[e.x+this._getOffset(-U,U,n),e.y+this._getOffset(-U,U,n)]});var X=[B+this._getOffset(-U,U,n),q+this._getOffset(-U,U,n)];l.push({op:'qcurveTo',data:[F+this._getOffset(-U,U,n),M+this._getOffset(-U,U,n),X[0],X[1]]}),l.push({op:'move',data:[e.x+this._getOffset(-V,V,n),e.y+this._getOffset(-V,V,n)]}),X=[B+this._getOffset(-V,V,n),q+this._getOffset(-V,V,n)],l.push({op:'qcurveTo',data:[F+this._getOffset(-V,V,n),M+this._getOffset(-V,V,n),X[0],X[1]]}),e.setPosition(X[0],X[1]),e.quadReflectionPoint=[B+(B-F),q+(q-M)]}break}case'T':case't':{var f='t'===t.key;if(2<=t.data.length){var G=+t.data[0],j=+t.data[1];f&&(G+=e.x,j+=e.y);var H=G,$=j,Q=a?a.key:'',z=null;('q'==Q||'Q'==Q||'t'==Q||'T'==Q)&&(z=e.quadReflectionPoint),z&&(H=z[0],$=z[1]);var Z=1*(1+.2*n.roughness),Y=1.5*(1+.22*n.roughness);l.push({op:'move',data:[e.x+this._getOffset(-Z,Z,n),e.y+this._getOffset(-Z,Z,n)]});var J=[G+this._getOffset(-Z,Z,n),j+this._getOffset(-Z,Z,n)];l.push({op:'qcurveTo',data:[H+this._getOffset(-Z,Z,n),$+this._getOffset(-Z,Z,n),J[0],J[1]]}),l.push({op:'move',data:[e.x+this._getOffset(-Y,Y,n),e.y+this._getOffset(-Y,Y,n)]}),J=[G+this._getOffset(-Y,Y,n),j+this._getOffset(-Y,Y,n)],l.push({op:'qcurveTo',data:[H+this._getOffset(-Y,Y,n),$+this._getOffset(-Y,Y,n),J[0],J[1]]}),e.setPosition(J[0],J[1]),e.quadReflectionPoint=[G+(G-H),j+(j-$)]}break}case'A':case'a':{var K='a'===t.key;if(7<=t.data.length){var ee=+t.data[0],te=+t.data[1],ae=+t.data[2],ne=+t.data[3],le=+t.data[4],se=+t.data[5],re=+t.data[6];if(K&&(se+=e.x,re+=e.y),se==e.x&&re==e.y)break;if(0==ee||0==te)l=l.concat(this._doubleLine(e.x,e.y,se,re,n)),e.setPosition(se,re);else for(var ie=n.maxRandomnessOffset||0,oe=0;1>oe;oe++)for(var i,pe=new R([e.x,e.y],[se,re],[ee,te],ae,!!ne,!!le),ue=pe.getNextSegment();ue;)i=this._bezierTo(ue.cp1[0],ue.cp1[1],ue.cp2[0],ue.cp2[1],ue.to[0],ue.to[1],e,n),l=l.concat(i),ue=pe.getNextSegment()}break}default:}return l}},{key:'_getOffset',value:function(e,t,a){return a.roughness*(Math.random()*(t-e)+e)}},{key:'_affine',value:function(e,t,a,n,l,s,r){return[-a*s-n*l+a+s*e+l*t,r*(a*l-n*s)+n+-r*l*e+r*s*t]}},{key:'_doubleLine',value:function(e,t,a,n,l){var s=this._line(e,t,a,n,l,!0,!1),r=this._line(e,t,a,n,l,!0,!0);return s.concat(r)}},{key:'_line',value:function(e,t,a,n,l,s,r){var i=g(e-a,2)+g(t-n,2),o=l.maxRandomnessOffset||0;100*(o*o)>i&&(o=y(i)/10);var p=o/2,u=.2+.2*Math.random(),d=l.bowing*l.maxRandomnessOffset*(n-t)/200,h=l.bowing*l.maxRandomnessOffset*(e-a)/200;d=this._getOffset(-d,d,l),h=this._getOffset(-h,h,l);var f=[];return s&&(r?f.push({op:'move',data:[e+this._getOffset(-p,p,l),t+this._getOffset(-p,p,l)]}):f.push({op:'move',data:[e+this._getOffset(-o,o,l),t+this._getOffset(-o,o,l)]})),r?f.push({op:'bcurveTo',data:[d+e+(a-e)*u+this._getOffset(-p,p,l),h+t+(n-t)*u+this._getOffset(-p,p,l),d+e+2*(a-e)*u+this._getOffset(-p,p,l),h+t+2*(n-t)*u+this._getOffset(-p,p,l),a+this._getOffset(-p,p,l),n+this._getOffset(-p,p,l)]}):f.push({op:'bcurveTo',data:[d+e+(a-e)*u+this._getOffset(-o,o,l),h+t+(n-t)*u+this._getOffset(-o,o,l),d+e+2*(a-e)*u+this._getOffset(-o,o,l),h+t+2*(n-t)*u+this._getOffset(-o,o,l),a+this._getOffset(-o,o,l),n+this._getOffset(-o,o,l)]}),f}},{key:'_curve',value:function(e,t,a){var n=e.length,l=[];if(3<n){var r=[],o=1-a.curveTightness;l.push({op:'move',data:[e[1][0],e[1][1]]});for(var s,p=1;p+2<n;p++)s=e[p],r[0]=[s[0],s[1]],r[1]=[s[0]+(o*e[p+1][0]-o*e[p-1][0])/6,s[1]+(o*e[p+1][1]-o*e[p-1][1])/6],r[2]=[e[p+1][0]+(o*e[p][0]-o*e[p+2][0])/6,e[p+1][1]+(o*e[p][1]-o*e[p+2][1])/6],r[3]=[e[p+1][0],e[p+1][1]],l.push({op:'bcurveTo',data:[r[1][0],r[1][1],r[2][0],r[2][1],r[3][0],r[3][1]]});if(t&&2===t.length){var i=a.maxRandomnessOffset;l.push({ops:'lineTo',data:[t[0]+this._getOffset(-i,i,a),t[1]+ +this._getOffset(-i,i,a)]})}}else 3===n?(l.push({op:'move',data:[e[1][0],e[1][1]]}),l.push({op:'bcurveTo',data:[e[1][0],e[1][1],e[2][0],e[2][1],e[2][0],e[2][1]]})):2===n&&(l=l.concat(this._doubleLine(e[0][0],e[0][1],e[1][0],e[1][1],a)));return l}},{key:'_ellipse',value:function(e,t,a,n,l,s,r,i){var o=this._getOffset(-.5,.5,i)-v/2,p=[];p.push([this._getOffset(-s,s,i)+t+.9*n*c(o-e),this._getOffset(-s,s,i)+a+.9*l*_(o-e)]);for(var u=o;u<2*v+o-.01;u+=e)p.push([this._getOffset(-s,s,i)+t+n*c(u),this._getOffset(-s,s,i)+a+l*_(u)]);return p.push([this._getOffset(-s,s,i)+t+n*c(o+2*v+.5*r),this._getOffset(-s,s,i)+a+l*_(o+2*v+.5*r)]),p.push([this._getOffset(-s,s,i)+t+.98*n*c(o+r),this._getOffset(-s,s,i)+a+.98*l*_(o+r)]),p.push([this._getOffset(-s,s,i)+t+.9*n*c(o+.5*r),this._getOffset(-s,s,i)+a+.9*l*_(o+.5*r)]),this._curve(p,null,i)}},{key:'_curveWithOffset',value:function(e,t,a){for(var n=[[e[0][0]+this._getOffset(-t,t,a),e[0][1]+this._getOffset(-t,t,a)],[e[0][0]+this._getOffset(-t,t,a),e[0][1]+this._getOffset(-t,t,a)]],l=1;l<e.length;l++)n.push([e[l][0]+this._getOffset(-t,t,a),e[l][1]+this._getOffset(-t,t,a)]),l===e.length-1&&n.push([e[l][0]+this._getOffset(-t,t,a),e[l][1]+this._getOffset(-t,t,a)]);return this._curve(n,null,a)}},{key:'_arc',value:function(e,t,a,n,l,s,r,i,p){var o=s+this._getOffset(-.1,.1,p),u=[];u.push([this._getOffset(-i,i,p)+t+.9*n*c(o-e),this._getOffset(-i,i,p)+a+.9*l*_(o-e)]);for(var d=o;d<=r;d+=e)u.push([this._getOffset(-i,i,p)+t+n*c(d),this._getOffset(-i,i,p)+a+l*_(d)]);return u.push([t+n*c(r),a+l*_(r)]),u.push([t+n*c(r),a+l*_(r)]),this._curve(u,null,p)}},{key:'_getIntersectingLines',value:function(e,t,a){for(var n,l=[],s=new w(e[0],e[1],e[2],e[3]),r=0;r<t.length;r++)n=new w(t[r],a[r],t[(r+1)%t.length],a[(r+1)%t.length]),s.compare(n)==d().INTERSECTS&&l.push([s.xi,s.yi]);return l}}]),a}();self._roughScript=self.document&&self.document.currentScript&&self.document.currentScript.src;var A=function(){function n(t,a){e(this,n),this.config=t||{},this.canvas=a,this.defaultOptions={maxRandomnessOffset:2,roughness:1,bowing:1,stroke:'#000',strokeWidth:1,curveTightness:0,curveStepCount:9,fill:null,fillStyle:'hachure',fillWeight:-1,hachureAngle:-41,hachureGap:-1},this.config.options&&(this.defaultOptions=this._options(this.config.options))}return t(n,[{key:'_options',value:function(e){return e?p({},this.defaultOptions,e):this.defaultOptions}},{key:'_drawable',value:function(e,t,a){return{shape:e,sets:t||[],options:a||this.defaultOptions}}},{key:'line',value:function(e,t,a,n,l){var s=this._options(l);return this._drawable('line',[this.lib.line(e,t,a,n,s)],s)}},{key:'rectangle',value:function(e,t,a,n,l){var s=this._options(l),r=[];if(s.fill){var i=[e,e+a,e+a,e],o=[t,t,t+n,t+n];'solid'===s.fillStyle?r.push(this.lib.solidFillShape(i,o,s)):r.push(this.lib.hachureFillShape(i,o,s))}return r.push(this.lib.rectangle(e,t,a,n,s)),this._drawable('rectangle',r,s)}},{key:'ellipse',value:function(e,t,a,n,l){var s=this._options(l),r=[];if(s.fill)if('solid'===s.fillStyle){var i=this.lib.ellipse(e,t,a,n,s);i.type='fillPath',r.push(i)}else r.push(this.lib.hachureFillEllipse(e,t,a,n,s));return r.push(this.lib.ellipse(e,t,a,n,s)),this._drawable('ellipse',r,s)}},{key:'circle',value:function(e,t,a,n){var l=this.ellipse(e,t,a,a,n);return l.shape='circle',l}},{key:'linearPath',value:function(e,t){var a=this._options(t);return this._drawable('linearPath',[this.lib.linearPath(e,!1,a)],a)}},{key:'polygon',value:function(e,t){var n=this._options(t),l=[];if(n.fill){var s,r=[],i=[],o=!0,u=!1;try{for(var d,h,p=a(e);!(o=(d=p.next()).done);o=!0)h=d.value,r.push(h[0]),i.push(h[1])}catch(e){u=!0,s=e}finally{try{!o&&p.return&&p.return()}finally{if(u)throw s}}'solid'===n.fillStyle?l.push(this.lib.solidFillShape(r,i,n)):l.push(this.lib.hachureFillShape(r,i,n))}return l.push(this.lib.linearPath(e,!0,n)),this._drawable('polygon',l,n)}},{key:'arc',value:function(e,t,a,n,l,s,r,i){var p=this._options(i),o=[];if(r&&p.fill)if('solid'===p.fillStyle){var u=this.lib.arc(e,t,a,n,l,s,!0,!1,p);u.type='fillPath',o.push(u)}else o.push(this.lib.hachureFillArc(e,t,a,n,l,s,p));return o.push(this.lib.arc(e,t,a,n,l,s,r,!0,p)),this._drawable('arc',o,p)}},{key:'curve',value:function(e,t){var a=this._options(t);return this._drawable('curve',[this.lib.curve(e,a)],a)}},{key:'path',value:function(e,t){var a=this._options(t),n=[];if(!e)return this._drawable('path',n,a);if(a.fill)if('solid'===a.fillStyle){n.push({type:'path2Dfill',path:e})}else{var l=this._computePathSize(e),s=[0,l[0],l[0],0],r=[0,0,l[1],l[1]],i=this.lib.hachureFillShape(s,r,a);i.type='path2Dpattern',i.size=l,i.path=e,n.push(i)}return n.push(this.lib.svgPath(e,a)),this._drawable('path',n,a)}},{key:'toPaths',value:function(e){var t,n=e.sets||[],l=e.options||this.defaultOptions,s=[],r=!0,i=!1;try{for(var o,p=a(n);!(r=(o=p.next()).done);r=!0){var u=o.value,d=null;switch(u.type){case'path':d={d:this.opsToPath(u),stroke:l.stroke,strokeWidth:l.strokeWidth,fill:'none'};break;case'fillPath':d={d:this.opsToPath(u),stroke:'none',strokeWidth:0,fill:l.fill};break;case'fillSketch':d=this._fillSketch(u,l);break;case'path2Dfill':d={d:u.path,stroke:'none',strokeWidth:0,fill:l.fill};break;case'path2Dpattern':{var g=u.size,f={x:0,y:0,width:1,height:1,viewBox:'0 0 '+h(g[0])+' '+h(g[1]),patternUnits:'objectBoundingBox',path:this._fillSketch(u,l)};d={d:u.path,stroke:'none',strokeWidth:0,pattern:f};break}}d&&s.push(d)}}catch(e){i=!0,t=e}finally{try{!r&&p.return&&p.return()}finally{if(i)throw t}}return s}},{key:'_fillSketch',value:function(e,t){var a=t.fillWeight;return 0>a&&(a=t.strokeWidth/2),{d:this.opsToPath(e),stroke:t.fill,strokeWidth:a,fill:'none'}}},{key:'opsToPath',value:function(e){var t,n='',l=!0,s=!1;try{for(var r,i=a(e.ops);!(l=(r=i.next()).done);l=!0){var o=r.value,p=o.data;switch(o.op){case'move':n+='M'+p[0]+' '+p[1]+' ';break;case'bcurveTo':n+='C'+p[0]+' '+p[1]+', '+p[2]+' '+p[3]+', '+p[4]+' '+p[5]+' ';break;case'qcurveTo':n+='Q'+p[0]+' '+p[1]+', '+p[2]+' '+p[3]+' ';break;case'lineTo':n+='L'+p[0]+' '+p[1]+' ';}}}catch(e){s=!0,t=e}finally{try{!l&&i.return&&i.return()}finally{if(s)throw t}}return n.trim()}},{key:'_computePathSize',value:function(e){var t=[0,0];if(self.document)try{var a='http://www.w3.org/2000/svg',n=self.document.createElementNS(a,'svg');n.setAttribute('width','0'),n.setAttribute('height','0');var l=self.document.createElementNS(a,'path');l.setAttribute('d',e),n.appendChild(l),self.document.body.appendChild(n);var s=l.getBBox();s&&(t[0]=s.width||0,t[1]=s.height||0),self.document.body.removeChild(n)}catch(e){}var r=this._canvasSize();return t[0]*t[1]||(t=r),t[0]=k(t[0],r[0]),t[1]=k(t[1],r[1]),t}},{key:'_canvasSize',value:function(){var e=function(e){return e&&'object'===('undefined'==typeof e?'undefined':o(e))&&e.baseVal&&e.baseVal.value?e.baseVal.value:e||100};return this.canvas?[e(this.canvas.width),e(this.canvas.height)]:[100,100]}},{key:'lib',get:function(){if(!this._renderer)if(self&&self.workly&&this.config.async&&!this.config.noWorker){var e=Function.prototype.toString,t=this.config.worklyURL||'https://cdn.jsdelivr.net/gh/pshihn/workly/dist/workly.min.js',a=this.config.roughURL||self._roughScript;if(a&&t){var n=URL.createObjectURL(new Blob(['importScripts(\''+t+'\', \''+a+'\');\nworkly.expose(self.rough.createRenderer());']));this._renderer=workly.proxy(n)}else this._renderer=new E}else this._renderer=new E;return this._renderer}}]),n}(),C=function(o){function p(){return e(this,p),r(this,(p.__proto__||s(p)).apply(this,arguments))}return i(p,o),t(p,[{key:'line',value:function(){var e=l(n.mark(function e(t,a,l,s,r){var i;return n.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=this._options(r),e.t0=this,e.next=4,this.lib.line(t,a,l,s,i);case 4:return e.t1=e.sent,e.t2=[e.t1],e.t3=i,e.abrupt('return',e.t0._drawable.call(e.t0,'line',e.t2,e.t3));case 8:case'end':return e.stop();}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:'rectangle',value:function(){var e=l(n.mark(function e(t,a,l,s,r){var i,o,p,u;return n.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i=this._options(r),o=[],!i.fill){e.next=18;break}if(p=[t,t+l,t+l,t],u=[a,a,a+s,a+s],'solid'!==i.fillStyle){e.next=13;break}return e.t0=o,e.next=9,this.lib.solidFillShape(p,u,i);case 9:e.t1=e.sent,e.t0.push.call(e.t0,e.t1),e.next=18;break;case 13:return e.t2=o,e.next=16,this.lib.hachureFillShape(p,u,i);case 16:e.t3=e.sent,e.t2.push.call(e.t2,e.t3);case 18:return e.t4=o,e.next=21,this.lib.rectangle(t,a,l,s,i);case 21:return e.t5=e.sent,e.t4.push.call(e.t4,e.t5),e.abrupt('return',this._drawable('rectangle',o,i));case 24:case'end':return e.stop();}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:'ellipse',value:function(){var e=l(n.mark(function e(t,a,l,s,r){var i,o,p;return n.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i=this._options(r),o=[],!i.fill){e.next=16;break}if('solid'!==i.fillStyle){e.next=11;break}return e.next=6,this.lib.ellipse(t,a,l,s,i);case 6:p=e.sent,p.type='fillPath',o.push(p),e.next=16;break;case 11:return e.t0=o,e.next=14,this.lib.hachureFillEllipse(t,a,l,s,i);case 14:e.t1=e.sent,e.t0.push.call(e.t0,e.t1);case 16:return e.t2=o,e.next=19,this.lib.ellipse(t,a,l,s,i);case 19:return e.t3=e.sent,e.t2.push.call(e.t2,e.t3),e.abrupt('return',this._drawable('ellipse',o,i));case 22:case'end':return e.stop();}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:'circle',value:function(){var e=l(n.mark(function e(t,a,l,s){var r;return n.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.ellipse(t,a,l,l,s);case 2:return r=e.sent,r.shape='circle',e.abrupt('return',r);case 5:case'end':return e.stop();}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:'linearPath',value:function(){var e=l(n.mark(function e(t,a){var l;return n.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return l=this._options(a),e.t0=this,e.next=4,this.lib.linearPath(t,!1,l);case 4:return e.t1=e.sent,e.t2=[e.t1],e.t3=l,e.abrupt('return',e.t0._drawable.call(e.t0,'linearPath',e.t2,e.t3));case 8:case'end':return e.stop();}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:'polygon',value:function(){var e=l(n.mark(function e(t,l){var s,r,i,o,u,d,h,g,f,y;return n.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(s=this._options(l),r=[],!s.fill){e.next=36;break}for(i=[],o=[],u=!0,d=!1,h=void 0,e.prev=7,g=a(t);!(u=(f=g.next()).done);u=!0)y=f.value,i.push(y[0]),o.push(y[1]);e.next=15;break;case 11:e.prev=11,e.t0=e['catch'](7),d=!0,h=e.t0;case 15:e.prev=15,e.prev=16,!u&&g.return&&g.return();case 18:if(e.prev=18,!d){e.next=21;break}throw h;case 21:return e.finish(18);case 22:return e.finish(15);case 23:if('solid'!==s.fillStyle){e.next=31;break}return e.t1=r,e.next=27,this.lib.solidFillShape(i,o,s);case 27:e.t2=e.sent,e.t1.push.call(e.t1,e.t2),e.next=36;break;case 31:return e.t3=r,e.next=34,this.lib.hachureFillShape(i,o,s);case 34:e.t4=e.sent,e.t3.push.call(e.t3,e.t4);case 36:return e.t5=r,e.next=39,this.lib.linearPath(t,!0,s);case 39:return e.t6=e.sent,e.t5.push.call(e.t5,e.t6),e.abrupt('return',this._drawable('polygon',r,s));case 42:case'end':return e.stop();}},e,this,[[7,11,15,23],[16,,18,22]])}));return function(){return e.apply(this,arguments)}}()},{key:'arc',value:function(){var e=l(n.mark(function e(t,a,l,s,r,i,p,u){var d,o,h;return n.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(d=this._options(u),o=[],!(p&&d.fill)){e.next=16;break}if('solid'!==d.fillStyle){e.next=11;break}return e.next=6,this.lib.arc(t,a,l,s,r,i,!0,!1,d);case 6:h=e.sent,h.type='fillPath',o.push(h),e.next=16;break;case 11:return e.t0=o,e.next=14,this.lib.hachureFillArc(t,a,l,s,r,i,d);case 14:e.t1=e.sent,e.t0.push.call(e.t0,e.t1);case 16:return e.t2=o,e.next=19,this.lib.arc(t,a,l,s,r,i,p,!0,d);case 19:return e.t3=e.sent,e.t2.push.call(e.t2,e.t3),e.abrupt('return',this._drawable('arc',o,d));case 22:case'end':return e.stop();}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:'curve',value:function(){var e=l(n.mark(function e(t,a){var l;return n.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return l=this._options(a),e.t0=this,e.next=4,this.lib.curve(t,l);case 4:return e.t1=e.sent,e.t2=[e.t1],e.t3=l,e.abrupt('return',e.t0._drawable.call(e.t0,'curve',e.t2,e.t3));case 8:case'end':return e.stop();}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:'path',value:function(){var e=l(n.mark(function e(t,a){var l,s,r,i,o,p,u;return n.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(l=this._options(a),s=[],t){e.next=4;break}return e.abrupt('return',this._drawable('path',s,l));case 4:if(!l.fill){e.next=20;break}if('solid'!==l.fillStyle){e.next=10;break}r={type:'path2Dfill',path:t},s.push(r),e.next=20;break;case 10:return i=this._computePathSize(t),o=[0,i[0],i[0],0],p=[0,0,i[1],i[1]],e.next=15,this.lib.hachureFillShape(o,p,l);case 15:u=e.sent,u.type='path2Dpattern',u.size=i,u.path=t,s.push(u);case 20:return e.t0=s,e.next=23,this.lib.svgPath(t,l);case 23:return e.t1=e.sent,e.t0.push.call(e.t0,e.t1),e.abrupt('return',this._drawable('path',s,l));case 26:case'end':return e.stop();}},e,this)}));return function(){return e.apply(this,arguments)}}()}]),p}(A),N=function(){function n(t,a){e(this,n),this.canvas=t,this.ctx=this.canvas.getContext('2d'),this._init(a)}return t(n,[{key:'_init',value:function(e){this.gen=new A(e,this.canvas)}},{key:'line',value:function(e,t,a,n,l){var s=this.gen.line(e,t,a,n,l);return this.draw(s),s}},{key:'rectangle',value:function(e,t,a,n,l){var s=this.gen.rectangle(e,t,a,n,l);return this.draw(s),s}},{key:'ellipse',value:function(e,t,a,n,l){var s=this.gen.ellipse(e,t,a,n,l);return this.draw(s),s}},{key:'circle',value:function(e,t,a,n){var l=this.gen.circle(e,t,a,n);return this.draw(l),l}},{key:'linearPath',value:function(e,t){var a=this.gen.linearPath(e,t);return this.draw(a),a}},{key:'polygon',value:function(e,t){var a=this.gen.polygon(e,t);return this.draw(a),a}},{key:'arc',value:function(e,t,a,n,l,s,r,i){var o=this.gen.arc(e,t,a,n,l,s,r,i);return this.draw(o),o}},{key:'curve',value:function(e,t){var a=this.gen.curve(e,t);return this.draw(a),a}},{key:'path',value:function(e,t){var a=this.gen.path(e,t);return this.draw(a),a}},{key:'draw',value:function(e){var t,n=e.sets||[],l=e.options||this.gen.defaultOptions,s=this.ctx,r=!0,i=!1;try{for(var o,p,u=a(n);!(r=(o=u.next()).done);r=!0)switch(p=o.value,p.type){case'path':s.save(),s.strokeStyle=l.stroke,s.lineWidth=l.strokeWidth,this._drawToContext(s,p),s.restore();break;case'fillPath':s.save(),s.fillStyle=l.fill,this._drawToContext(s,p,l),s.restore();break;case'fillSketch':this._fillSketch(s,p,l);break;case'path2Dfill':{this.ctx.save(),this.ctx.fillStyle=l.fill;var d=new Path2D(p.path);this.ctx.fill(d),this.ctx.restore();break}case'path2Dpattern':{var h=p.size,g=document.createElement('canvas'),f=g.getContext('2d'),y=this._computeBBox(p.path);y&&(y.width||y.height)?(g.width=this.canvas.width,g.height=this.canvas.height,f.translate(y.x||0,y.y||0)):(g.width=h[0],g.height=h[1]),this._fillSketch(f,p,l),this.ctx.save(),this.ctx.fillStyle=this.ctx.createPattern(g,'repeat');var c=new Path2D(p.path);this.ctx.fill(c),this.ctx.restore();break}}}catch(e){i=!0,t=e}finally{try{!r&&u.return&&u.return()}finally{if(i)throw t}}}},{key:'_computeBBox',value:function(e){if(self.document)try{var t='http://www.w3.org/2000/svg',a=self.document.createElementNS(t,'svg');a.setAttribute('width','0'),a.setAttribute('height','0');var n=self.document.createElementNS(t,'path');n.setAttribute('d',e),a.appendChild(n),self.document.body.appendChild(a);var l=n.getBBox();return self.document.body.removeChild(a),l}catch(e){}return null}},{key:'_fillSketch',value:function(e,t,a){var n=a.fillWeight;0>n&&(n=a.strokeWidth/2),e.save(),e.strokeStyle=a.fill,e.lineWidth=n,this._drawToContext(e,t),e.restore()}},{key:'_drawToContext',value:function(e,t){e.beginPath();var n,l=!0,s=!1;try{for(var r,i=a(t.ops);!(l=(r=i.next()).done);l=!0){var o=r.value,p=o.data;switch(o.op){case'move':e.moveTo(p[0],p[1]);break;case'bcurveTo':e.bezierCurveTo(p[0],p[1],p[2],p[3],p[4],p[5]);break;case'qcurveTo':e.quadraticCurveTo(p[0],p[1],p[2],p[3]);break;case'lineTo':e.lineTo(p[0],p[1]);}}}catch(e){s=!0,n=e}finally{try{!l&&i.return&&i.return()}finally{if(s)throw n}}'fillPath'===t.type?e.fill():e.stroke()}},{key:'generator',get:function(){return this.gen}}],[{key:'createRenderer',value:function(){return new E}}]),n}(),L=function(a){function o(){return e(this,o),r(this,(o.__proto__||s(o)).apply(this,arguments))}return i(o,a),t(o,[{key:'_init',value:function(e){this.gen=new C(e,this.canvas)}},{key:'line',value:function(){var e=l(n.mark(function e(t,a,l,s,r){var i;return n.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.gen.line(t,a,l,s,r);case 2:return i=e.sent,this.draw(i),e.abrupt('return',i);case 5:case'end':return e.stop();}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:'rectangle',value:function(){var e=l(n.mark(function e(t,a,l,s,r){var i;return n.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.gen.rectangle(t,a,l,s,r);case 2:return i=e.sent,this.draw(i),e.abrupt('return',i);case 5:case'end':return e.stop();}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:'ellipse',value:function(){var e=l(n.mark(function e(t,a,l,s,r){var i;return n.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.gen.ellipse(t,a,l,s,r);case 2:return i=e.sent,this.draw(i),e.abrupt('return',i);case 5:case'end':return e.stop();}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:'circle',value:function(){var e=l(n.mark(function e(t,a,l,s){var r;return n.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.gen.circle(t,a,l,s);case 2:return r=e.sent,this.draw(r),e.abrupt('return',r);case 5:case'end':return e.stop();}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:'linearPath',value:function(){var e=l(n.mark(function e(t,a){var l;return n.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.gen.linearPath(t,a);case 2:return l=e.sent,this.draw(l),e.abrupt('return',l);case 5:case'end':return e.stop();}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:'polygon',value:function(){var e=l(n.mark(function e(t,a){var l;return n.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.gen.polygon(t,a);case 2:return l=e.sent,this.draw(l),e.abrupt('return',l);case 5:case'end':return e.stop();}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:'arc',value:function(){var e=l(n.mark(function e(t,a,l,s,r,i,o,p){var u;return n.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.gen.arc(t,a,l,s,r,i,o,p);case 2:return u=e.sent,this.draw(u),e.abrupt('return',u);case 5:case'end':return e.stop();}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:'curve',value:function(){var e=l(n.mark(function e(t,a){var l;return n.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.gen.curve(t,a);case 2:return l=e.sent,this.draw(l),e.abrupt('return',l);case 5:case'end':return e.stop();}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:'path',value:function(){var e=l(n.mark(function e(t,a){var l;return n.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.gen.path(t,a);case 2:return l=e.sent,this.draw(l),e.abrupt('return',l);case 5:case'end':return e.stop();}},e,this)}));return function(){return e.apply(this,arguments)}}()}]),o}(N),W=function(){function n(t,a){e(this,n),this.svg=t,this._init(a)}return t(n,[{key:'_init',value:function(e){this.gen=new A(e,this.svg)}},{key:'line',value:function(e,t,a,n,l){var s=this.gen.line(e,t,a,n,l);return this.draw(s)}},{key:'rectangle',value:function(e,t,a,n,l){var s=this.gen.rectangle(e,t,a,n,l);return this.draw(s)}},{key:'ellipse',value:function(e,t,a,n,l){var s=this.gen.ellipse(e,t,a,n,l);return this.draw(s)}},{key:'circle',value:function(e,t,a,n){var l=this.gen.circle(e,t,a,n);return this.draw(l)}},{key:'linearPath',value:function(e,t){var a=this.gen.linearPath(e,t);return this.draw(a)}},{key:'polygon',value:function(e,t){var a=this.gen.polygon(e,t);return this.draw(a)}},{key:'arc',value:function(e,t,a,n,l,s,r,i){var o=this.gen.arc(e,t,a,n,l,s,r,i);return this.draw(o)}},{key:'curve',value:function(e,t){var a=this.gen.curve(e,t);return this.draw(a)}},{key:'path',value:function(e,t){var a=this.gen.path(e,t);return this.draw(a)}},{key:'draw',value:function(e){var t,n=e.sets||[],l=e.options||this.gen.defaultOptions,s=this.svg.ownerDocument||document,r=s.createElementNS('http://www.w3.org/2000/svg','g'),i=!0,o=!1;try{for(var p,d=a(n);!(i=(p=d.next()).done);i=!0){var g=p.value,y=null;switch(g.type){case'path':{y=s.createElementNS('http://www.w3.org/2000/svg','path'),y.setAttribute('d',this._opsToPath(g)),y.style.stroke=l.stroke,y.style.strokeWidth=l.strokeWidth,y.style.fill='none';break}case'fillPath':{y=s.createElementNS('http://www.w3.org/2000/svg','path'),y.setAttribute('d',this._opsToPath(g)),y.style.stroke='none',y.style.strokeWidth=0,y.style.fill=l.fill;break}case'fillSketch':{y=this._fillSketch(s,g,l);break}case'path2Dfill':{y=s.createElementNS('http://www.w3.org/2000/svg','path'),y.setAttribute('d',g.path),y.style.stroke='none',y.style.strokeWidth=0,y.style.fill=l.fill;break}case'path2Dpattern':{var c=g.size,_=s.createElementNS('http://www.w3.org/2000/svg','pattern'),x='rough-'+f(Math.random()*(u||999999));_.setAttribute('id',x),_.setAttribute('x',0),_.setAttribute('y',0),_.setAttribute('width',1),_.setAttribute('height',1),_.setAttribute('height',1),_.setAttribute('viewBox','0 0 '+h(c[0])+' '+h(c[1])),_.setAttribute('patternUnits','objectBoundingBox');var v=this._fillSketch(s,g,l);_.appendChild(v),this.defs.appendChild(_),y=s.createElementNS('http://www.w3.org/2000/svg','path'),y.setAttribute('d',g.path),y.style.stroke='none',y.style.strokeWidth=0,y.style.fill='url(#'+x+')';break}}y&&r.appendChild(y)}}catch(e){o=!0,t=e}finally{try{!i&&d.return&&d.return()}finally{if(o)throw t}}return r}},{key:'_fillSketch',value:function(e,t,a){var n=a.fillWeight;0>n&&(n=a.strokeWidth/2);var l=e.createElementNS('http://www.w3.org/2000/svg','path');return l.setAttribute('d',this._opsToPath(t)),l.style.stroke=a.fill,l.style.strokeWidth=n,l.style.fill='none',l}},{key:'_opsToPath',value:function(e){return this.gen.opsToPath(e)}},{key:'generator',get:function(){return this.gen}},{key:'defs',get:function(){if(!this._defs){var e=this.svg.ownerDocument||document,t=e.createElementNS('http://www.w3.org/2000/svg','defs');this.svg.firstChild?this.svg.insertBefore(t,this.svg.firstChild):this.svg.appendChild(t),this._defs=t}return this._defs}}]),n}(),z=function(a){function o(){return e(this,o),r(this,(o.__proto__||s(o)).apply(this,arguments))}return i(o,a),t(o,[{key:'_init',value:function(e){this.gen=new C(e,this.svg)}},{key:'line',value:function(){var e=l(n.mark(function e(t,a,l,s,r){var i;return n.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.gen.line(t,a,l,s,r);case 2:return i=e.sent,e.abrupt('return',this.draw(i));case 4:case'end':return e.stop();}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:'rectangle',value:function(){var e=l(n.mark(function e(t,a,l,s,r){var i;return n.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.gen.rectangle(t,a,l,s,r);case 2:return i=e.sent,e.abrupt('return',this.draw(i));case 4:case'end':return e.stop();}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:'ellipse',value:function(){var e=l(n.mark(function e(t,a,l,s,r){var i;return n.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.gen.ellipse(t,a,l,s,r);case 2:return i=e.sent,e.abrupt('return',this.draw(i));case 4:case'end':return e.stop();}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:'circle',value:function(){var e=l(n.mark(function e(t,a,l,s){var r;return n.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.gen.circle(t,a,l,s);case 2:return r=e.sent,e.abrupt('return',this.draw(r));case 4:case'end':return e.stop();}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:'linearPath',value:function(){var e=l(n.mark(function e(t,a){var l;return n.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.gen.linearPath(t,a);case 2:return l=e.sent,e.abrupt('return',this.draw(l));case 4:case'end':return e.stop();}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:'polygon',value:function(){var e=l(n.mark(function e(t,a){var l;return n.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.gen.polygon(t,a);case 2:return l=e.sent,e.abrupt('return',this.draw(l));case 4:case'end':return e.stop();}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:'arc',value:function(){var e=l(n.mark(function e(t,a,l,s,r,i,o,p){var u;return n.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.gen.arc(t,a,l,s,r,i,o,p);case 2:return u=e.sent,e.abrupt('return',this.draw(u));case 4:case'end':return e.stop();}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:'curve',value:function(){var e=l(n.mark(function e(t,a){var l;return n.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.gen.curve(t,a);case 2:return l=e.sent,e.abrupt('return',this.draw(l));case 4:case'end':return e.stop();}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:'path',value:function(){var e=l(n.mark(function e(t,a){var l;return n.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.gen.path(t,a);case 2:return l=e.sent,e.abrupt('return',this.draw(l));case 4:case'end':return e.stop();}},e,this)}));return function(){return e.apply(this,arguments)}}()}]),o}(W);return{canvas:function(e,t){return t&&t.async?new L(e,t):new N(e,t)},svg:function(e,t){return t&&t.async?new z(e,t):new W(e,t)},createRenderer:function(){return N.createRenderer()},generator:function(e,t){return e&&e.async?new C(e,t):new A(e,t)}}}(_classCallCheck,_createClass,_getIterator,_regeneratorRuntime,_asyncToGenerator,_Object$getPrototypeOf,_possibleConstructorReturn,_inherits,_typeof,_Object$assign,_Number$MAX_SAFE_INTEGER);