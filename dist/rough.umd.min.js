(function(e,t){'object'==typeof exports&&'undefined'!=typeof module?module.exports=t():'function'==typeof define&&define.amd?define(t):e.rough=t()})(this,function(){'use strict';function e(){return{LEFT:0,RIGHT:1,INTERSECTS:2,AHEAD:3,BEHIND:4,SEPARATE:5,UNDEFINED:6}}var t=Math.round,i=Math.tan,s=Math.pow,a=Math.floor,n=Math.cos,l=Math.sin,p=Math.PI,r=Math.sqrt,h=Math.max,f=Math.min,d=Math.abs,o=Number.MAX_VALUE;class g{constructor(t,i,s,a){this.RoughSegmentRelationConst=e(),this.px1=t,this.py1=i,this.px2=s,this.py2=a,this.xi=o,this.yi=o,this.a=a-i,this.b=t-s,this.c=s*i-t*a,this._undefined=0==this.a&&0==this.b&&0==this.c}isUndefined(){return this._undefined}compare(e){if(this.isUndefined()||e.isUndefined())return this.RoughSegmentRelationConst.UNDEFINED;var t=o,i=o,s=0,n=0,l=this.a,p=this.b,r=this.c;return(1e-5<d(p)&&(t=-l/p,s=-r/p),1e-5<d(e.b)&&(i=-e.a/e.b,n=-e.c/e.b),t==o)?i==o?-r/l==-e.c/e.a?this.py1>=f(e.py1,e.py2)&&this.py1<=h(e.py1,e.py2)?(this.xi=this.px1,this.yi=this.py1,this.RoughSegmentRelationConst.INTERSECTS):this.py2>=f(e.py1,e.py2)&&this.py2<=h(e.py1,e.py2)?(this.xi=this.px2,this.yi=this.py2,this.RoughSegmentRelationConst.INTERSECTS):this.RoughSegmentRelationConst.SEPARATE:this.RoughSegmentRelationConst.SEPARATE:(this.xi=this.px1,this.yi=i*this.xi+n,-1e-5>(this.py1-this.yi)*(this.yi-this.py2)||-1e-5>(e.py1-this.yi)*(this.yi-e.py2)?this.RoughSegmentRelationConst.SEPARATE:1e-5>d(e.a)?-1e-5>(e.px1-this.xi)*(this.xi-e.px2)?this.RoughSegmentRelationConst.SEPARATE:this.RoughSegmentRelationConst.INTERSECTS:this.RoughSegmentRelationConst.INTERSECTS):i==o?(this.xi=e.px1,this.yi=t*this.xi+s,-1e-5>(e.py1-this.yi)*(this.yi-e.py2)||-1e-5>(this.py1-this.yi)*(this.yi-this.py2)?this.RoughSegmentRelationConst.SEPARATE:1e-5>d(l)?-1e-5>(this.px1-this.xi)*(this.xi-this.px2)?this.RoughSegmentRelationConst.SEPARATE:this.RoughSegmentRelationConst.INTERSECTS:this.RoughSegmentRelationConst.INTERSECTS):t==i?s==n?this.px1>=f(e.px1,e.px2)&&this.px1<=h(e.py1,e.py2)?(this.xi=this.px1,this.yi=this.py1,this.RoughSegmentRelationConst.INTERSECTS):this.px2>=f(e.px1,e.px2)&&this.px2<=h(e.px1,e.px2)?(this.xi=this.px2,this.yi=this.py2,this.RoughSegmentRelationConst.INTERSECTS):this.RoughSegmentRelationConst.SEPARATE:this.RoughSegmentRelationConst.SEPARATE:(this.xi=(n-s)/(t-i),this.yi=t*this.xi+s,-1e-5>(this.px1-this.xi)*(this.xi-this.px2)||-1e-5>(e.px1-this.xi)*(this.xi-e.px2)?this.RoughSegmentRelationConst.SEPARATE:this.RoughSegmentRelationConst.INTERSECTS)}getLength(){return this._getLength(this.px1,this.py1,this.px2,this.py2)}_getLength(e,t,i,s){var a=i-e,n=s-t;return r(a*a+n*n)}}class _{constructor(e,t,i,s,a,n,o,l){this.top=e,this.bottom=t,this.left=i,this.right=s,this.gap=a,this.sinAngle=n,this.tanAngle=l,1e-4>d(n)?this.pos=i+a:.9999<d(n)?this.pos=e+a:(this.deltaX=(t-e)*d(l),this.pos=i-d(this.deltaX),this.hGap=d(a/o),this.sLeft=new g(i,t,i,e),this.sRight=new g(s,t,s,e))}getNextLine(){if(1e-4>d(this.sinAngle)){if(this.pos<this.right){let e=[this.pos,this.top,this.pos,this.bottom];return this.pos+=this.gap,e}}else if(!(.9999<d(this.sinAngle))){let t=this.pos-this.deltaX/2,i=this.pos+this.deltaX/2,a=this.bottom,n=this.top;if(this.pos<this.right+this.deltaX){for(;t<this.left&&i<this.left||t>this.right&&i>this.right;)if(this.pos+=this.hGap,t=this.pos-this.deltaX/2,i=this.pos+this.deltaX/2,this.pos>this.right+this.deltaX)return null;let o=new g(t,a,i,n);o.compare(this.sLeft)==e().INTERSECTS&&(t=o.xi,a=o.yi),o.compare(this.sRight)==e().INTERSECTS&&(i=o.xi,n=o.yi),0<this.tanAngle&&(t=this.right-(t-this.left),i=this.right-(i-this.left));let s=[t,a,i,n];return this.pos+=this.hGap,s}}else if(this.pos<this.bottom){let e=[this.left,this.pos,this.right,this.pos];return this.pos+=this.gap,e}return null}}class u{constructor(e,t){this.type=e,this.text=t}isType(e){return this.type===e}}class c{constructor(e){this.PARAMS={A:['rx','ry','x-axis-rotation','large-arc-flag','sweep-flag','x','y'],a:['rx','ry','x-axis-rotation','large-arc-flag','sweep-flag','x','y'],C:['x1','y1','x2','y2','x','y'],c:['x1','y1','x2','y2','x','y'],H:['x'],h:['x'],L:['x','y'],l:['x','y'],M:['x','y'],m:['x','y'],Q:['x1','y1','x','y'],q:['x1','y1','x','y'],S:['x2','y2','x','y'],s:['x2','y2','x','y'],T:['x','y'],t:['x','y'],V:['y'],v:['y'],Z:[],z:[]},this.COMMAND=0,this.NUMBER=1,this.EOD=2,this.segments=[],this.d=e||'',this.parseData(e),this.processPoints()}loadFromSegments(e){this.segments=e,this.processPoints()}processPoints(){let e=null,t=[0,0];for(let a,s=0;s<this.segments.length;s++){switch(a=this.segments[s],a.key){case'M':case'L':case'T':a.point=[a.data[0],a.data[1]];break;case'm':case'l':case't':a.point=[a.data[0]+t[0],a.data[1]+t[1]];break;case'H':a.point=[a.data[0],t[1]];break;case'h':a.point=[a.data[0]+t[0],t[1]];break;case'V':a.point=[t[0],a.data[0]];break;case'v':a.point=[t[0],a.data[0]+t[1]];break;case'z':case'Z':e&&(a.point=[e[0],e[1]]);break;case'C':a.point=[a.data[4],a.data[5]];break;case'c':a.point=[a.data[4]+t[0],a.data[5]+t[1]];break;case'S':a.point=[a.data[2],a.data[3]];break;case's':a.point=[a.data[2]+t[0],a.data[3]+t[1]];break;case'Q':a.point=[a.data[2],a.data[3]];break;case'q':a.point=[a.data[2]+t[0],a.data[3]+t[1]];break;case'A':a.point=[a.data[5],a.data[6]];break;case'a':a.point=[a.data[5]+t[0],a.data[6]+t[1]];}('m'===a.key||'M'===a.key)&&(e=null),a.point&&(t=a.point,!e&&(e=a.point)),('z'===a.key||'Z'===a.key)&&(e=null)}}get closed(){if('undefined'==typeof this._closed){this._closed=!1;for(let e of this.segments)'z'===e.key.toLowerCase()&&(this._closed=!0)}return this._closed}parseData(e){var t=this.tokenize(e),s=0,a=t[s],n='BOD';for(this.segments=[];!a.isType(this.EOD);){var o,l=[];if(!('BOD'==n))a.isType(this.NUMBER)?o=this.PARAMS[n].length:(s++,o=this.PARAMS[a.text].length,n=a.text);else if('M'==a.text||'m'==a.text)s++,o=this.PARAMS[a.text].length,n=a.text;else return this.parseData('M0,0'+e);if(s+o<t.length){for(var p,r=s;r<s+o;r++)if(p=t[r],p.isType(this.NUMBER))l[l.length]=p.text;else return void console.error('Parameter type is not a number: '+n+','+p.text);var i;if(this.PARAMS[n])i={key:n,data:l};else return void console.error('Unsupported segment type: '+n);this.segments.push(i),s+=o,a=t[s],'M'==n&&(n='L'),'m'==n&&(n='l')}else console.error('Path data ended before all parameters were found')}}tokenize(e){for(var t=[];''!=e;)if(e.match(/^([ \t\r\n,]+)/))e=e.substr(RegExp.$1.length);else if(e.match(/^([aAcChHlLmMqQsStTvVzZ])/))t[t.length]=new u(this.COMMAND,RegExp.$1),e=e.substr(RegExp.$1.length);else if(e.match(/^(([-+]?[0-9]+(\.[0-9]*)?|[-+]?\.[0-9]+)([eE][-+]?[0-9]+)?)/))t[t.length]=new u(this.NUMBER,parseFloat(RegExp.$1)),e=e.substr(RegExp.$1.length);else return console.error('Unrecognized segment command: '+e),null;return t[t.length]=new u(this.EOD,null),t}}class y{constructor(e){this.d=e,this.parsed=new c(e),this._position=[0,0],this.bezierReflectionPoint=null,this.quadReflectionPoint=null,this._first=null}get segments(){return this.parsed.segments}get closed(){return this.parsed.closed}get linearPoints(){if(!this._linearPoints){const e=[];let t=[];for(let i of this.parsed.segments){let s=i.key.toLowerCase();('m'===s||'z'===s)&&(t.length&&(e.push(t),t=[]),'z'===s)||i.point&&t.push(i.point)}t.length&&(e.push(t),t=[]),this._linearPoints=e}return this._linearPoints}get first(){return this._first}set first(e){this._first=e}setPosition(e,t){this._position=[e,t],this._first||(this._first=[e,t])}get position(){return this._position}get x(){return this._position[0]}get y(){return this._position[1]}}class m{constructor(e,t,i,s,a,o){const h=p/180;if(this._segIndex=0,this._numSegs=0,e[0]==t[0]&&e[1]==t[1])return;this._rx=d(i[0]),this._ry=d(i[1]),this._sinPhi=l(s*h),this._cosPhi=n(s*h);var f,g=this._cosPhi*(e[0]-t[0])/2+this._sinPhi*(e[1]-t[1])/2,_=-this._sinPhi*(e[0]-t[0])/2+this._cosPhi*(e[1]-t[1])/2,u=this._rx*this._rx*this._ry*this._ry-this._rx*this._rx*_*_-this._ry*this._ry*g*g;if(0>u){let e=r(1-u/(this._rx*this._rx*this._ry*this._ry));this._rx=e,this._ry=e,f=0}else f=(a==o?-1:1)*r(u/(this._rx*this._rx*_*_+this._ry*this._ry*g*g));let c=f*this._rx*_/this._ry,y=-f*this._ry*g/this._rx;this._C=[0,0],this._C[0]=this._cosPhi*c-this._sinPhi*y+(e[0]+t[0])/2,this._C[1]=this._sinPhi*c+this._cosPhi*y+(e[1]+t[1])/2,this._theta=this.calculateVectorAngle(1,0,(g-c)/this._rx,(_-y)/this._ry);let x=this.calculateVectorAngle((g-c)/this._rx,(_-y)/this._ry,(-g-c)/this._rx,(-_-y)/this._ry);!o&&0<x?x-=2*p:o&&0>x&&(x+=2*p),this._numSegs=Math.ceil(d(x/(p/2))),this._delta=x/this._numSegs,this._T=8/3*l(this._delta/4)*l(this._delta/4)/l(this._delta/2),this._from=e}getNextSegment(){var e,t,i;if(this._segIndex==this._numSegs)return null;let s=n(this._theta),a=l(this._theta),o=this._theta+this._delta,p=n(o),r=l(o);return i=[this._cosPhi*this._rx*p-this._sinPhi*this._ry*r+this._C[0],this._sinPhi*this._rx*p+this._cosPhi*this._ry*r+this._C[1]],e=[this._from[0]+this._T*(-this._cosPhi*this._rx*a-this._sinPhi*this._ry*s),this._from[1]+this._T*(-this._sinPhi*this._rx*a+this._cosPhi*this._ry*s)],t=[i[0]+this._T*(this._cosPhi*this._rx*r+this._sinPhi*this._ry*p),i[1]+this._T*(this._sinPhi*this._rx*r-this._cosPhi*this._ry*p)],this._theta=o,this._from=[i[0],i[1]],this._segIndex++,{cp1:e,cp2:t,to:i}}calculateVectorAngle(e,t,i,s){var a=Math.atan2;let n=a(t,e),o=a(s,i);return o>=n?o-n:2*p-(n-o)}}class x{constructor(e,t){this.sets=e,this.closed=t}fit(e){let t=[];for(const i of this.sets){let s=i.length,n=a(e*s);if(5>n){if(5>=s)continue;n=5}t.push(this.reduce(i,n))}let s='';for(const a of t){for(let e,t=0;t<a.length;t++)e=a[t],s+=0===t?'M'+e[0]+','+e[1]:'L'+e[0]+','+e[1];this.closed&&(s+='z ')}return s}distance(e,t){return r(s(e[0]-t[0],2)+s(e[1]-t[1],2))}reduce(e,t){if(e.length<=t)return e;let n=e.slice(0);for(;n.length>t;){let e=-1,t=-1;for(let o=1;o<n.length-1;o++){let i=this.distance(n[o-1],n[o]),a=this.distance(n[o],n[o+1]),l=this.distance(n[o-1],n[o+1]),p=(i+a+l)/2,s=r(p*(p-i)*(p-a)*(p-l));(0>e||s<e)&&(e=s,t=o)}if(0<t)n.splice(t,1);else break}return n}}class S{line(e,t,i,s,a){let n=this._doubleLine(e,t,i,s,a);return{type:'path',ops:n}}linearPath(e,t,s){const a=(e||[]).length;if(2<a){let n=[];for(let t=0;t<a-1;t++)n=n.concat(this._doubleLine(e[t][0],e[t][1],e[t+1][0],e[t+1][1],s));return t&&(n=n.concat(this._doubleLine(e[a-1][0],e[a-1][1],e[0][0],e[0][1],s))),{type:'path',ops:n}}return 2===a?this.line(e[0][0],e[0][1],e[1][0],e[1][1],s):void 0}polygon(e,t){return this.linearPath(e,!0,t)}rectangle(e,t,i,s,a){return this.polygon([[e,t],[e+i,t],[e+i,t+s],[e,t+s]],a)}curve(e,t){let i=this._curveWithOffset(e,1*(1+.2*t.roughness),t),s=this._curveWithOffset(e,1.5*(1+.22*t.roughness),t);return{type:'path',ops:i.concat(s)}}ellipse(e,t,i,s,a){const n=2*p/a.curveStepCount;let o=d(i/2),l=d(s/2);o+=this._getOffset(.05*-o,.05*o,a),l+=this._getOffset(.05*-l,.05*l,a);let r=this._ellipse(n,e,t,o,l,1,n*this._getOffset(.1,this._getOffset(.4,1,a),a),a),h=this._ellipse(n,e,t,o,l,1.5,0,a);return{type:'path',ops:r.concat(h)}}arc(e,t,i,s,a,r,h,g,_){let o=e,u=t,c=d(i/2),y=d(s/2);c+=this._getOffset(.01*-c,.01*c,_),y+=this._getOffset(.01*-y,.01*y,_);let x=a,m=r;for(;0>x;)x+=2*p,m+=2*p;m-x>2*p&&(x=0,m=2*p);let S=2*p/_.curveStepCount,b=f(S/2,(m-x)/2),w=this._arc(b,o,u,c,y,x,m,1,_),O=this._arc(b,o,u,c,y,x,m,1.5,_),v=w.concat(O);return h&&(g?(v=v.concat(this._doubleLine(o,u,o+c*n(x),u+y*l(x),_)),v=v.concat(this._doubleLine(o,u,o+c*n(m),u+y*l(m),_))):(v.push({op:'lineTo',data:[o,u]}),v.push({op:'lineTo',data:[o+c*n(x),u+y*l(x)]}))),{type:'path',ops:v}}hachureFillArc(e,t,i,s,a,r,h){let o=e,f=t,g=d(i/2),_=d(s/2);g+=this._getOffset(.01*-g,.01*g,h),_+=this._getOffset(.01*-_,.01*_,h);let u=a,c=r;for(;0>u;)u+=2*p,c+=2*p;c-u>2*p&&(u=0,c=2*p);let y=(c-u)/h.curveStepCount,x=[],m=[];for(let p=u;p<=c;p+=y)x.push(o+g*n(p)),m.push(f+_*l(p));return x.push(o+g*n(c)),m.push(f+_*l(c)),x.push(o),m.push(f),this.hachureFillShape(x,m,h)}solidFillShape(e,t,s){let a=[];if(e&&t&&e.length&&t.length&&e.length===t.length){let i=s.maxRandomnessOffset||0;const o=e.length;if(2<o){a.push({op:'move',data:[e[0]+this._getOffset(-i,i,s),t[0]+this._getOffset(-i,i,s)]});for(var n=1;n<o;n++)a.push({op:'lineTo',data:[e[n]+this._getOffset(-i,i,s),t[n]+this._getOffset(-i,i,s)]})}}return{type:'fillPath',ops:a}}hachureFillShape(e,t,s){let a=[];if(e&&t&&e.length&&t.length){let o=e[0],r=e[0],d=t[0],g=t[0];for(let s=1;s<e.length;s++)o=f(o,e[s]),r=h(r,e[s]),d=f(d,t[s]),g=h(g,t[s]);const u=s.hachureAngle;let c=s.hachureGap;0>c&&(c=4*s.strokeWidth),c=h(c,.1);const y=u%180*(p/180),x=n(y),m=l(y),S=i(y),b=new _(d-1,g+1,o-1,r+1,c,m,x,S);for(let i;null!=(i=b.getNextLine());){let n=this._getIntersectingLines(i,e,t);for(let e=0;e<n.length;e++)if(e<n.length-1){let t=n[e],i=n[e+1];a=a.concat(this._doubleLine(t[0],t[1],i[0],i[1],s))}}}return{type:'fillSketch',ops:a}}hachureFillEllipse(e,t,s,a,n){let o=[],l=d(s/2),h=d(a/2);l+=this._getOffset(.05*-l,.05*l,n),h+=this._getOffset(.05*-h,.05*h,n);let f=n.hachureAngle,g=n.hachureGap;0>=g&&(g=4*n.strokeWidth);let _=n.fillWeight;0>_&&(_=n.strokeWidth/2);let u=i(f%180*(p/180)),c=h/l,y=r(c*u*c*u+1),x=c*u/y,m=1/y,S=g/(l*h/r(h*m*(h*m)+l*x*(l*x))/l),b=r(l*l-(e-l+S)*(e-l+S));for(var w=e-l+S;w<e+l;w+=S){b=r(l*l-(e-w)*(e-w));let i=this._affine(w,t-b,e,t,x,m,c),s=this._affine(w,t+b,e,t,x,m,c);o=o.concat(this._doubleLine(i[0],i[1],s[0],s[1],n))}return{type:'fillSketch',ops:o}}svgPath(e,t){e=(e||'').replace(/\n/g,' ').replace(/(-\s)/g,'-').replace('/(ss)/g',' ');let a=new y(e);if(t.simplification){let e=new x(a.linearPoints,a.closed),i=e.fit(t.simplification);a=new y(i)}let n=[],o=a.segments||[];for(let l=0;l<o.length;l++){let e=o[l],i=0<l?o[l-1]:null,s=this._processSegment(a,e,i,t);s&&s.length&&(n=n.concat(s))}return{type:'path',ops:n}}_bezierTo(e,t,s,a,n,l,p,r){let o=[],h=[r.maxRandomnessOffset||1,(r.maxRandomnessOffset||1)+.5],d=null;for(let f=0;2>f;f++)0===f?o.push({op:'move',data:[p.x,p.y]}):o.push({op:'move',data:[p.x+this._getOffset(-h[0],h[0],r),p.y+this._getOffset(-h[0],h[0],r)]}),d=[n+this._getOffset(-h[f],h[f],r),l+this._getOffset(-h[f],h[f],r)],o.push({op:'bcurveTo',data:[e+this._getOffset(-h[f],h[f],r),t+this._getOffset(-h[f],h[f],r),s+this._getOffset(-h[f],h[f],r),a+this._getOffset(-h[f],h[f],r),d[0],d[1]]});return p.setPosition(d[0],d[1]),o}_processSegment(e,t,i,s){let a=[];switch(t.key){case'M':case'm':{let i='m'===t.key;if(2<=t.data.length){let n=+t.data[0],o=+t.data[1];i&&(n+=e.x,o+=e.y);let l=1*(s.maxRandomnessOffset||0);n+=this._getOffset(-l,l,s),o+=this._getOffset(-l,l,s),e.setPosition(n,o),a.push({op:'move',data:[n,o]})}break}case'L':case'l':{let i='l'===t.key;if(2<=t.data.length){let n=+t.data[0],o=+t.data[1];i&&(n+=e.x,o+=e.y),a=a.concat(this._doubleLine(e.x,e.y,n,o,s)),e.setPosition(n,o)}break}case'H':case'h':{const i='h'===t.key;if(t.data.length){let n=+t.data[0];i&&(n+=e.x),a=a.concat(this._doubleLine(e.x,e.y,n,e.y,s)),e.setPosition(n,e.y)}break}case'V':case'v':{const i='v'===t.key;if(t.data.length){let n=+t.data[0];i&&(n+=e.y),a=a.concat(this._doubleLine(e.x,e.y,e.x,n,s)),e.setPosition(e.x,n)}break}case'Z':case'z':{e.first&&(a=a.concat(this._doubleLine(e.x,e.y,e.first[0],e.first[1],s)),e.setPosition(e.first[0],e.first[1]),e.first=null);break}case'C':case'c':{const i='c'===t.key;if(6<=t.data.length){let n=+t.data[0],o=+t.data[1],l=+t.data[2],p=+t.data[3],r=+t.data[4],h=+t.data[5];i&&(n+=e.x,l+=e.x,r+=e.x,o+=e.y,p+=e.y,h+=e.y);let d=this._bezierTo(n,o,l,p,r,h,e,s);a=a.concat(d),e.bezierReflectionPoint=[r+(r-l),h+(h-p)]}break}case'S':case's':{const o='s'===t.key;if(4<=t.data.length){let l=+t.data[0],p=+t.data[1],r=+t.data[2],h=+t.data[3];o&&(l+=e.x,r+=e.x,p+=e.y,h+=e.y);let d=l,f=p,g=i?i.key:'';var n=null;('c'==g||'C'==g||'s'==g||'S'==g)&&(n=e.bezierReflectionPoint),n&&(d=n[0],f=n[1]);let _=this._bezierTo(d,f,l,p,r,h,e,s);a=a.concat(_),e.bezierReflectionPoint=[r+(r-l),h+(h-p)]}break}case'Q':case'q':{const i='q'===t.key;if(4<=t.data.length){let n=+t.data[0],o=+t.data[1],l=+t.data[2],p=+t.data[3];i&&(n+=e.x,l+=e.x,o+=e.y,p+=e.y);let r=1*(1+.2*s.roughness),h=1.5*(1+.22*s.roughness);a.push({op:'move',data:[e.x+this._getOffset(-r,r,s),e.y+this._getOffset(-r,r,s)]});let d=[l+this._getOffset(-r,r,s),p+this._getOffset(-r,r,s)];a.push({op:'qcurveTo',data:[n+this._getOffset(-r,r,s),o+this._getOffset(-r,r,s),d[0],d[1]]}),a.push({op:'move',data:[e.x+this._getOffset(-h,h,s),e.y+this._getOffset(-h,h,s)]}),d=[l+this._getOffset(-h,h,s),p+this._getOffset(-h,h,s)],a.push({op:'qcurveTo',data:[n+this._getOffset(-h,h,s),o+this._getOffset(-h,h,s),d[0],d[1]]}),e.setPosition(d[0],d[1]),e.quadReflectionPoint=[l+(l-n),p+(p-o)]}break}case'T':case't':{const o='t'===t.key;if(2<=t.data.length){let l=+t.data[0],p=+t.data[1];o&&(l+=e.x,p+=e.y);let r=l,h=p,d=i?i.key:'';var n=null;('q'==d||'Q'==d||'t'==d||'T'==d)&&(n=e.quadReflectionPoint),n&&(r=n[0],h=n[1]);let g=1*(1+.2*s.roughness),_=1.5*(1+.22*s.roughness);a.push({op:'move',data:[e.x+this._getOffset(-g,g,s),e.y+this._getOffset(-g,g,s)]});let u=[l+this._getOffset(-g,g,s),p+this._getOffset(-g,g,s)];a.push({op:'qcurveTo',data:[r+this._getOffset(-g,g,s),h+this._getOffset(-g,g,s),u[0],u[1]]}),a.push({op:'move',data:[e.x+this._getOffset(-_,_,s),e.y+this._getOffset(-_,_,s)]}),u=[l+this._getOffset(-_,_,s),p+this._getOffset(-_,_,s)],a.push({op:'qcurveTo',data:[r+this._getOffset(-_,_,s),h+this._getOffset(-_,_,s),u[0],u[1]]}),e.setPosition(u[0],u[1]),e.quadReflectionPoint=[l+(l-r),p+(p-h)]}break}case'A':case'a':{const i='a'===t.key;if(7<=t.data.length){let n=+t.data[0],o=+t.data[1],l=+t.data[2],p=+t.data[3],r=+t.data[4],h=+t.data[5],d=+t.data[6];if(i&&(h+=e.x,d+=e.y),h==e.x&&d==e.y)break;if(0==n||0==o)a=a.concat(this._doubleLine(e.x,e.y,h,d,s)),e.setPosition(h,d);else{s.maxRandomnessOffset||0;for(let t=0;1>t;t++){let t=new m([e.x,e.y],[h,d],[n,o],l,!!p,!!r),i=t.getNextSegment();for(;i;){let n=this._bezierTo(i.cp1[0],i.cp1[1],i.cp2[0],i.cp2[1],i.to[0],i.to[1],e,s);a=a.concat(n),i=t.getNextSegment()}}}}break}default:}return a}_getOffset(e,t,i){return i.roughness*(Math.random()*(t-e)+e)}_affine(e,t,i,s,a,n,o){return[-i*n-s*a+i+n*e+a*t,o*(i*a-s*n)+s+-o*a*e+o*n*t]}_doubleLine(e,t,i,s,a){const n=this._line(e,t,i,s,a,!0,!1),o=this._line(e,t,i,s,a,!0,!0);return n.concat(o)}_line(e,t,i,a,n,o,l){const p=s(e-i,2)+s(t-a,2);let h=n.maxRandomnessOffset||0;100*(h*h)>p&&(h=r(p)/10);const d=h/2,f=.2+.2*Math.random();let g=n.bowing*n.maxRandomnessOffset*(a-t)/200,_=n.bowing*n.maxRandomnessOffset*(e-i)/200;g=this._getOffset(-g,g,n),_=this._getOffset(-_,_,n);let u=[];return o&&(l?u.push({op:'move',data:[e+this._getOffset(-d,d,n),t+this._getOffset(-d,d,n)]}):u.push({op:'move',data:[e+this._getOffset(-h,h,n),t+this._getOffset(-h,h,n)]})),l?u.push({op:'bcurveTo',data:[g+e+(i-e)*f+this._getOffset(-d,d,n),_+t+(a-t)*f+this._getOffset(-d,d,n),g+e+2*(i-e)*f+this._getOffset(-d,d,n),_+t+2*(a-t)*f+this._getOffset(-d,d,n),i+this._getOffset(-d,d,n),a+this._getOffset(-d,d,n)]}):u.push({op:'bcurveTo',data:[g+e+(i-e)*f+this._getOffset(-h,h,n),_+t+(a-t)*f+this._getOffset(-h,h,n),g+e+2*(i-e)*f+this._getOffset(-h,h,n),_+t+2*(a-t)*f+this._getOffset(-h,h,n),i+this._getOffset(-h,h,n),a+this._getOffset(-h,h,n)]}),u}_curve(e,t,i){const a=e.length;let n=[];if(3<a){const o=[],l=1-i.curveTightness;n.push({op:'move',data:[e[1][0],e[1][1]]});for(let t=1;t+2<a;t++){const i=e[t];o[0]=[i[0],i[1]],o[1]=[i[0]+(l*e[t+1][0]-l*e[t-1][0])/6,i[1]+(l*e[t+1][1]-l*e[t-1][1])/6],o[2]=[e[t+1][0]+(l*e[t][0]-l*e[t+2][0])/6,e[t+1][1]+(l*e[t][1]-l*e[t+2][1])/6],o[3]=[e[t+1][0],e[t+1][1]],n.push({op:'bcurveTo',data:[o[1][0],o[1][1],o[2][0],o[2][1],o[3][0],o[3][1]]})}if(t&&2===t.length){let e=i.maxRandomnessOffset;n.push({ops:'lineTo',data:[t[0]+this._getOffset(-e,e,i),t[1]+ +this._getOffset(-e,e,i)]})}}else 3===a?(n.push({op:'move',data:[e[1][0],e[1][1]]}),n.push({op:'bcurveTo',data:[e[1][0],e[1][1],e[2][0],e[2][1],e[2][0],e[2][1]]})):2===a&&(n=n.concat(this._doubleLine(e[0][0],e[0][1],e[1][0],e[1][1],i)));return n}_ellipse(e,t,i,s,a,r,h,d){const o=this._getOffset(-.5,.5,d)-p/2,f=[];f.push([this._getOffset(-r,r,d)+t+.9*s*n(o-e),this._getOffset(-r,r,d)+i+.9*a*l(o-e)]);for(let g=o;g<2*p+o-.01;g+=e)f.push([this._getOffset(-r,r,d)+t+s*n(g),this._getOffset(-r,r,d)+i+a*l(g)]);return f.push([this._getOffset(-r,r,d)+t+s*n(o+2*p+.5*h),this._getOffset(-r,r,d)+i+a*l(o+2*p+.5*h)]),f.push([this._getOffset(-r,r,d)+t+.98*s*n(o+h),this._getOffset(-r,r,d)+i+.98*a*l(o+h)]),f.push([this._getOffset(-r,r,d)+t+.9*s*n(o+.5*h),this._getOffset(-r,r,d)+i+.9*a*l(o+.5*h)]),this._curve(f,null,d)}_curveWithOffset(e,t,s){const a=[[e[0][0]+this._getOffset(-t,t,s),e[0][1]+this._getOffset(-t,t,s)],[e[0][0]+this._getOffset(-t,t,s),e[0][1]+this._getOffset(-t,t,s)]];for(let n=1;n<e.length;n++)a.push([e[n][0]+this._getOffset(-t,t,s),e[n][1]+this._getOffset(-t,t,s)]),n===e.length-1&&a.push([e[n][0]+this._getOffset(-t,t,s),e[n][1]+this._getOffset(-t,t,s)]);return this._curve(a,null,s)}_arc(e,t,i,s,a,p,r,h,d){const o=p+this._getOffset(-.1,.1,d),f=[];f.push([this._getOffset(-h,h,d)+t+.9*s*n(o-e),this._getOffset(-h,h,d)+i+.9*a*l(o-e)]);for(let g=o;g<=r;g+=e)f.push([this._getOffset(-h,h,d)+t+s*n(g),this._getOffset(-h,h,d)+i+a*l(g)]);return f.push([t+s*n(r),i+a*l(r)]),f.push([t+s*n(r),i+a*l(r)]),this._curve(f,null,d)}_getIntersectingLines(t,s,a){let n=[];for(var o=new g(t[0],t[1],t[2],t[3]),l=0;l<s.length;l++){let t=new g(s[l],a[l],s[(l+1)%s.length],a[(l+1)%s.length]);o.compare(t)==e().INTERSECTS&&n.push([o.xi,o.yi])}return n}}self._roughScript=self.document&&self.document.currentScript&&self.document.currentScript.src;class b{constructor(e,t){this.config=e||{},this.canvas=t,this.defaultOptions={maxRandomnessOffset:2,roughness:1,bowing:1,stroke:'#000',strokeWidth:1,curveTightness:0,curveStepCount:9,fill:null,fillStyle:'hachure',fillWeight:-1,hachureAngle:-41,hachureGap:-1},this.config.options&&(this.defaultOptions=this._options(this.config.options))}_options(e){return e?Object.assign({},this.defaultOptions,e):this.defaultOptions}_drawable(e,t,i){return{shape:e,sets:t||[],options:i||this.defaultOptions}}get lib(){if(!this._renderer)if(self&&self.workly&&this.config.async&&!this.config.noWorker){const e=Function.prototype.toString,t=this.config.worklyURL||'https://cdn.jsdelivr.net/gh/pshihn/workly/dist/workly.min.js',i=this.config.roughURL||self._roughScript;if(i&&t){let e=`importScripts('${t}', '${i}');\nworkly.expose(self.rough.createRenderer());`,s=URL.createObjectURL(new Blob([e]));this._renderer=workly.proxy(s)}else this._renderer=new S}else this._renderer=new S;return this._renderer}line(e,t,i,s,a){const n=this._options(a);return this._drawable('line',[this.lib.line(e,t,i,s,n)],n)}rectangle(e,t,i,s,a){const n=this._options(a),o=[];if(n.fill){const a=[e,e+i,e+i,e],l=[t,t,t+s,t+s];'solid'===n.fillStyle?o.push(this.lib.solidFillShape(a,l,n)):o.push(this.lib.hachureFillShape(a,l,n))}return o.push(this.lib.rectangle(e,t,i,s,n)),this._drawable('rectangle',o,n)}ellipse(e,t,i,s,a){const n=this._options(a),o=[];if(n.fill)if('solid'===n.fillStyle){const a=this.lib.ellipse(e,t,i,s,n);a.type='fillPath',o.push(a)}else o.push(this.lib.hachureFillEllipse(e,t,i,s,n));return o.push(this.lib.ellipse(e,t,i,s,n)),this._drawable('ellipse',o,n)}circle(e,t,i,s){let a=this.ellipse(e,t,i,i,s);return a.shape='circle',a}linearPath(e,t){const i=this._options(t);return this._drawable('linearPath',[this.lib.linearPath(e,!1,i)],i)}polygon(e,t){const i=this._options(t),s=[];if(i.fill){let t=[],a=[];for(let i of e)t.push(i[0]),a.push(i[1]);'solid'===i.fillStyle?s.push(this.lib.solidFillShape(t,a,i)):s.push(this.lib.hachureFillShape(t,a,i))}return s.push(this.lib.linearPath(e,!0,i)),this._drawable('polygon',s,i)}arc(e,t,i,s,a,n,l,p){const r=this._options(p),o=[];if(l&&r.fill)if('solid'===r.fillStyle){let l=this.lib.arc(e,t,i,s,a,n,!0,!1,r);l.type='fillPath',o.push(l)}else o.push(this.lib.hachureFillArc(e,t,i,s,a,n,r));return o.push(this.lib.arc(e,t,i,s,a,n,l,!0,r)),this._drawable('arc',o,r)}curve(e,t){const i=this._options(t);return this._drawable('curve',[this.lib.curve(e,i)],i)}path(e,t){const i=this._options(t),s=[];if(!e)return this._drawable('path',s,i);if(i.fill)if('solid'===i.fillStyle){s.push({type:'path2Dfill',path:e})}else{const t=this._computePathSize(e);let a=[0,t[0],t[0],0],n=[0,0,t[1],t[1]],o=this.lib.hachureFillShape(a,n,i);o.type='path2Dpattern',o.size=t,o.path=e,s.push(o)}return s.push(this.lib.svgPath(e,i)),this._drawable('path',s,i)}toPaths(e){const i=e.sets||[],s=e.options||this.defaultOptions,a=[];for(const n of i){let e=null;switch(n.type){case'path':e={d:this.opsToPath(n),stroke:s.stroke,strokeWidth:s.strokeWidth,fill:'none'};break;case'fillPath':e={d:this.opsToPath(n),stroke:'none',strokeWidth:0,fill:s.fill};break;case'fillSketch':e=this._fillSketch(n,s);break;case'path2Dfill':e={d:n.path,stroke:'none',strokeWidth:0,fill:s.fill};break;case'path2Dpattern':{const i=n.size,a={x:0,y:0,width:1,height:1,viewBox:`0 0 ${t(i[0])} ${t(i[1])}`,patternUnits:'objectBoundingBox',path:this._fillSketch(n,s)};e={d:n.path,stroke:'none',strokeWidth:0,pattern:a};break}}e&&a.push(e)}return a}_fillSketch(e,t){let i=t.fillWeight;return 0>i&&(i=t.strokeWidth/2),{d:this.opsToPath(e),stroke:t.fill,strokeWidth:i,fill:'none'}}opsToPath(e){let t='';for(let i of e.ops){const e=i.data;switch(i.op){case'move':t+=`M${e[0]} ${e[1]} `;break;case'bcurveTo':t+=`C${e[0]} ${e[1]}, ${e[2]} ${e[3]}, ${e[4]} ${e[5]} `;break;case'qcurveTo':t+=`Q${e[0]} ${e[1]}, ${e[2]} ${e[3]} `;break;case'lineTo':t+=`L${e[0]} ${e[1]} `;}}return t.trim()}_computePathSize(e){let t=[0,0];if(self.document)try{const i='http://www.w3.org/2000/svg';let s=self.document.createElementNS(i,'svg');s.setAttribute('width','0'),s.setAttribute('height','0');let a=self.document.createElementNS(i,'path');a.setAttribute('d',e),s.appendChild(a),self.document.body.appendChild(s);let n=a.getBBox();n&&(t[0]=n.width||0,t[1]=n.height||0),self.document.body.removeChild(s)}catch(e){}const i=this._canvasSize();return t[0]*t[1]||(t=i),t[0]=f(t[0],i[0]),t[1]=f(t[1],i[1]),t}_canvasSize(){const e=(e)=>e&&'object'==typeof e&&e.baseVal&&e.baseVal.value?e.baseVal.value:e||100;return this.canvas?[e(this.canvas.width),e(this.canvas.height)]:[100,100]}}class w extends b{async line(e,t,i,s,a){const n=this._options(a);return this._drawable('line',[await this.lib.line(e,t,i,s,n)],n)}async rectangle(e,t,i,s,a){const n=this._options(a),o=[];if(n.fill){const a=[e,e+i,e+i,e],l=[t,t,t+s,t+s];'solid'===n.fillStyle?o.push((await this.lib.solidFillShape(a,l,n))):o.push((await this.lib.hachureFillShape(a,l,n)))}return o.push((await this.lib.rectangle(e,t,i,s,n))),this._drawable('rectangle',o,n)}async ellipse(e,t,i,s,a){const n=this._options(a),o=[];if(n.fill)if('solid'===n.fillStyle){const a=await this.lib.ellipse(e,t,i,s,n);a.type='fillPath',o.push(a)}else o.push((await this.lib.hachureFillEllipse(e,t,i,s,n)));return o.push((await this.lib.ellipse(e,t,i,s,n))),this._drawable('ellipse',o,n)}async circle(e,t,i,s){let a=await this.ellipse(e,t,i,i,s);return a.shape='circle',a}async linearPath(e,t){const i=this._options(t);return this._drawable('linearPath',[await this.lib.linearPath(e,!1,i)],i)}async polygon(e,t){const i=this._options(t),s=[];if(i.fill){let t=[],a=[];for(let i of e)t.push(i[0]),a.push(i[1]);'solid'===i.fillStyle?s.push((await this.lib.solidFillShape(t,a,i))):s.push((await this.lib.hachureFillShape(t,a,i)))}return s.push((await this.lib.linearPath(e,!0,i))),this._drawable('polygon',s,i)}async arc(e,t,i,s,a,n,l,p){const r=this._options(p),o=[];if(l&&r.fill)if('solid'===r.fillStyle){let l=await this.lib.arc(e,t,i,s,a,n,!0,!1,r);l.type='fillPath',o.push(l)}else o.push((await this.lib.hachureFillArc(e,t,i,s,a,n,r)));return o.push((await this.lib.arc(e,t,i,s,a,n,l,!0,r))),this._drawable('arc',o,r)}async curve(e,t){const i=this._options(t);return this._drawable('curve',[await this.lib.curve(e,i)],i)}async path(e,t){const i=this._options(t),s=[];if(!e)return this._drawable('path',s,i);if(i.fill)if('solid'===i.fillStyle){s.push({type:'path2Dfill',path:e})}else{const t=this._computePathSize(e);let a=[0,t[0],t[0],0],n=[0,0,t[1],t[1]],o=await this.lib.hachureFillShape(a,n,i);o.type='path2Dpattern',o.size=t,o.path=e,s.push(o)}return s.push((await this.lib.svgPath(e,i))),this._drawable('path',s,i)}}class O{constructor(e,t){this.canvas=e,this.ctx=this.canvas.getContext('2d'),this._init(t)}_init(e){this.gen=new b(e,this.canvas)}get generator(){return this.gen}static createRenderer(){return new S}line(e,t,i,s,a){let n=this.gen.line(e,t,i,s,a);return this.draw(n),n}rectangle(e,t,i,s,a){let n=this.gen.rectangle(e,t,i,s,a);return this.draw(n),n}ellipse(e,t,i,s,a){let n=this.gen.ellipse(e,t,i,s,a);return this.draw(n),n}circle(e,t,i,s){let a=this.gen.circle(e,t,i,s);return this.draw(a),a}linearPath(e,t){let i=this.gen.linearPath(e,t);return this.draw(i),i}polygon(e,t){let i=this.gen.polygon(e,t);return this.draw(i),i}arc(e,t,i,s,a,n,o,l){let p=this.gen.arc(e,t,i,s,a,n,o,l);return this.draw(p),p}curve(e,t){let i=this.gen.curve(e,t);return this.draw(i),i}path(e,t){let i=this.gen.path(e,t);return this.draw(i),i}draw(e){let t=e.sets||[],i=e.options||this.gen.defaultOptions,s=this.ctx;for(let a of t)switch(a.type){case'path':s.save(),s.strokeStyle=i.stroke,s.lineWidth=i.strokeWidth,this._drawToContext(s,a),s.restore();break;case'fillPath':s.save(),s.fillStyle=i.fill,this._drawToContext(s,a,i),s.restore();break;case'fillSketch':this._fillSketch(s,a,i);break;case'path2Dfill':{this.ctx.save(),this.ctx.fillStyle=i.fill;let e=new Path2D(a.path);this.ctx.fill(e),this.ctx.restore();break}case'path2Dpattern':{let e=a.size;const t=document.createElement('canvas'),s=t.getContext('2d');let n=this._computeBBox(a.path);n&&(n.width||n.height)?(t.width=this.canvas.width,t.height=this.canvas.height,s.translate(n.x||0,n.y||0)):(t.width=e[0],t.height=e[1]),this._fillSketch(s,a,i),this.ctx.save(),this.ctx.fillStyle=this.ctx.createPattern(t,'repeat');let o=new Path2D(a.path);this.ctx.fill(o),this.ctx.restore();break}}}_computeBBox(e){if(self.document)try{const t='http://www.w3.org/2000/svg';let i=self.document.createElementNS(t,'svg');i.setAttribute('width','0'),i.setAttribute('height','0');let s=self.document.createElementNS(t,'path');s.setAttribute('d',e),i.appendChild(s),self.document.body.appendChild(i);let a=s.getBBox();return self.document.body.removeChild(i),a}catch(e){}return null}_fillSketch(e,t,i){let s=i.fillWeight;0>s&&(s=i.strokeWidth/2),e.save(),e.strokeStyle=i.fill,e.lineWidth=s,this._drawToContext(e,t),e.restore()}_drawToContext(e,t){e.beginPath();for(let i of t.ops){const t=i.data;switch(i.op){case'move':e.moveTo(t[0],t[1]);break;case'bcurveTo':e.bezierCurveTo(t[0],t[1],t[2],t[3],t[4],t[5]);break;case'qcurveTo':e.quadraticCurveTo(t[0],t[1],t[2],t[3]);break;case'lineTo':e.lineTo(t[0],t[1]);}}'fillPath'===t.type?e.fill():e.stroke()}}class v extends O{_init(e){this.gen=new w(e,this.canvas)}async line(e,t,i,s,a){let n=await this.gen.line(e,t,i,s,a);return this.draw(n),n}async rectangle(e,t,i,s,a){let n=await this.gen.rectangle(e,t,i,s,a);return this.draw(n),n}async ellipse(e,t,i,s,a){let n=await this.gen.ellipse(e,t,i,s,a);return this.draw(n),n}async circle(e,t,i,s){let a=await this.gen.circle(e,t,i,s);return this.draw(a),a}async linearPath(e,t){let i=await this.gen.linearPath(e,t);return this.draw(i),i}async polygon(e,t){let i=await this.gen.polygon(e,t);return this.draw(i),i}async arc(e,t,i,s,a,n,o,l){let p=await this.gen.arc(e,t,i,s,a,n,o,l);return this.draw(p),p}async curve(e,t){let i=await this.gen.curve(e,t);return this.draw(i),i}async path(e,t){let i=await this.gen.path(e,t);return this.draw(i),i}}class R{constructor(e,t){this.svg=e,this._init(t)}_init(e){this.gen=new b(e,this.svg)}get generator(){return this.gen}get defs(){if(!this._defs){let e=this.svg.ownerDocument||document,t=e.createElementNS('http://www.w3.org/2000/svg','defs');this.svg.firstChild?this.svg.insertBefore(t,this.svg.firstChild):this.svg.appendChild(t),this._defs=t}return this._defs}line(e,t,i,s,a){let n=this.gen.line(e,t,i,s,a);return this.draw(n)}rectangle(e,t,i,s,a){let n=this.gen.rectangle(e,t,i,s,a);return this.draw(n)}ellipse(e,t,i,s,a){let n=this.gen.ellipse(e,t,i,s,a);return this.draw(n)}circle(e,t,i,s){let a=this.gen.circle(e,t,i,s);return this.draw(a)}linearPath(e,t){let i=this.gen.linearPath(e,t);return this.draw(i)}polygon(e,t){let i=this.gen.polygon(e,t);return this.draw(i)}arc(e,t,i,s,a,n,o,l){let p=this.gen.arc(e,t,i,s,a,n,o,l);return this.draw(p)}curve(e,t){let i=this.gen.curve(e,t);return this.draw(i)}path(e,t){let i=this.gen.path(e,t);return this.draw(i)}draw(e){let i=e.sets||[],s=e.options||this.gen.defaultOptions,n=this.svg.ownerDocument||document,o=n.createElementNS('http://www.w3.org/2000/svg','g');for(let l of i){let e=null;switch(l.type){case'path':{e=n.createElementNS('http://www.w3.org/2000/svg','path'),e.setAttribute('d',this._opsToPath(l)),e.style.stroke=s.stroke,e.style.strokeWidth=s.strokeWidth,e.style.fill='none';break}case'fillPath':{e=n.createElementNS('http://www.w3.org/2000/svg','path'),e.setAttribute('d',this._opsToPath(l)),e.style.stroke='none',e.style.strokeWidth=0,e.style.fill=s.fill;break}case'fillSketch':{e=this._fillSketch(n,l,s);break}case'path2Dfill':{e=n.createElementNS('http://www.w3.org/2000/svg','path'),e.setAttribute('d',l.path),e.style.stroke='none',e.style.strokeWidth=0,e.style.fill=s.fill;break}case'path2Dpattern':{const i=l.size,o=n.createElementNS('http://www.w3.org/2000/svg','pattern'),p=`rough-${a(Math.random()*(Number.MAX_SAFE_INTEGER||999999))}`;o.setAttribute('id',p),o.setAttribute('x',0),o.setAttribute('y',0),o.setAttribute('width',1),o.setAttribute('height',1),o.setAttribute('height',1),o.setAttribute('viewBox',`0 0 ${t(i[0])} ${t(i[1])}`),o.setAttribute('patternUnits','objectBoundingBox');const r=this._fillSketch(n,l,s);o.appendChild(r),this.defs.appendChild(o),e=n.createElementNS('http://www.w3.org/2000/svg','path'),e.setAttribute('d',l.path),e.style.stroke='none',e.style.strokeWidth=0,e.style.fill=`url(#${p})`;break}}e&&o.appendChild(e)}return o}_fillSketch(e,t,i){let s=i.fillWeight;0>s&&(s=i.strokeWidth/2);let a=e.createElementNS('http://www.w3.org/2000/svg','path');return a.setAttribute('d',this._opsToPath(t)),a.style.stroke=i.fill,a.style.strokeWidth=s,a.style.fill='none',a}_opsToPath(e){return this.gen.opsToPath(e)}}class P extends R{_init(e){this.gen=new w(e,this.svg)}async line(e,t,i,s,a){let n=await this.gen.line(e,t,i,s,a);return this.draw(n)}async rectangle(e,t,i,s,a){let n=await this.gen.rectangle(e,t,i,s,a);return this.draw(n)}async ellipse(e,t,i,s,a){let n=await this.gen.ellipse(e,t,i,s,a);return this.draw(n)}async circle(e,t,i,s){let a=await this.gen.circle(e,t,i,s);return this.draw(a)}async linearPath(e,t){let i=await this.gen.linearPath(e,t);return this.draw(i)}async polygon(e,t){let i=await this.gen.polygon(e,t);return this.draw(i)}async arc(e,t,i,s,a,n,o,l){let p=await this.gen.arc(e,t,i,s,a,n,o,l);return this.draw(p)}async curve(e,t){let i=await this.gen.curve(e,t);return this.draw(i)}async path(e,t){let i=await this.gen.path(e,t);return this.draw(i)}}var T={canvas(e,t){return t&&t.async?new v(e,t):new O(e,t)},svg(e,t){return t&&t.async?new P(e,t):new R(e,t)},createRenderer(){return O.createRenderer()},generator(e,t){return e&&e.async?new w(e,t):new b(e,t)}};return T});